[20:56:35 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[20:56:35 INF] Now listening on: https://localhost:7221
[20:56:35 INF] Now listening on: http://localhost:5232
[20:56:35 INF] Application started. Press Ctrl+C to shut down.
[20:56:35 INF] Hosting environment: Development
[20:56:35 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[20:56:36 INF] Request starting HTTP/2 GET https://localhost:7221/swagger/index.html - -
[20:56:36 INF] Information details: 
[20:56:36 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[20:56:36 INF] Request finished HTTP/2 GET https://localhost:7221/swagger/index.html - - - 200 - text/html;charset=utf-8 231.4772ms
[20:56:37 INF] Request starting HTTP/2 GET https://localhost:7221/_vs/browserLink - -
[20:56:37 INF] Request finished HTTP/2 GET https://localhost:7221/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 49.8844ms
[20:56:37 INF] Request starting HTTP/2 GET https://localhost:7221/swagger/favicon-32x32.png - -
[20:56:37 INF] Request starting HTTP/2 GET https://localhost:7221/swagger/v1/swagger.json - -
[20:56:37 INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
[20:56:37 INF] Information details: 
[20:56:37 INF] Request finished HTTP/2 GET https://localhost:7221/swagger/favicon-32x32.png - - - 0 628 image/png 121.3839ms
[20:56:37 INF] Information details: 
[20:56:37 INF] Request finished HTTP/2 GET https://localhost:7221/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 130.2912ms
[20:57:13 INF] Request starting HTTP/2 POST https://localhost:7221/api/v1/Auth/login application/json 74
[20:57:13 INF] CORS policy execution successful.
[20:57:13 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[20:57:13 INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Login(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[20:57:14 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[20:57:14 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 705.4901ms.
[20:57:14 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthDto'.
[20:57:14 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) in 857.6274ms
[20:57:14 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[20:57:14 INF] Information details: AuthController -> Login (username:acc-test-three@gmail.com)=>
LoginHandler -> Handle=>
ArticleRepository -> GetByUsername=>
TokenService -> CreateToken
[20:57:14 INF] Request finished HTTP/2 POST https://localhost:7221/api/v1/Auth/login application/json 74 - 200 - application/json;+charset=utf-8 1496.8945ms
[20:57:32 INF] Request starting HTTP/2 GET https://localhost:7221/api/v1/Article/1/offers - -
[20:57:32 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[20:57:32 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[20:57:32 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[20:57:36 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 3794.5958ms.
[20:57:36 INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
[20:57:36 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 3830.3792ms
[20:57:36 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[20:57:36 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:0)=>
GetArticleOfferByIdHandler -> Handle
[20:57:36 INF] Request finished HTTP/2 GET https://localhost:7221/api/v1/Article/1/offers - - - 400 - text/plain;+charset=utf-8 3913.0465ms
[20:57:42 INF] Request starting HTTP/2 GET https://localhost:7221/api/v1/Article/1/offers?MaxArticlePrice=10 - -
[20:57:42 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[20:57:42 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[20:57:42 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[20:57:42 INF] Start processing HTTP request GET https://localhost:7221/api/v1/Article/1/exist
[20:57:42 INF] Sending HTTP request GET https://localhost:7221/api/v1/Article/1/exist
[20:57:42 INF] Request starting HTTP/1.1 GET https://localhost:7221/api/v1/Article/1/exist - -
[20:57:42 INF] Information details: 
[20:57:42 INF] Request finished HTTP/1.1 GET https://localhost:7221/api/v1/Article/1/exist - - - 404 0 - 3.6142ms
[20:57:42 INF] Received HTTP response headers after 157.1011ms - 404
[20:57:42 INF] End processing HTTP request after 168.4803ms - 404
[20:57:42 INF] Start processing HTTP request GET https://localhost:7221/api/v1/Article/1/exist
[20:57:42 INF] Sending HTTP request GET https://localhost:7221/api/v1/Article/1/exist
[20:57:43 INF] Request starting HTTP/1.1 GET https://localhost:7221/api/v1/Article/1/exist - -
[20:57:43 INF] Information details: 
[20:57:43 INF] Request finished HTTP/1.1 GET https://localhost:7221/api/v1/Article/1/exist - - - 404 0 - 2.2885ms
[20:57:43 INF] Received HTTP response headers after 45.1249ms - 404
[20:57:43 INF] End processing HTTP request after 48.3797ms - 404
[20:57:47 ERR] Error details: Status(StatusCode="Unavailable", Detail="Error connecting to subchannel.", DebugException="System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|281_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Grpc.Net.Client.Balancer.Internal.SocketConnectivitySubchannelTransport.TryConnectAsync(ConnectContext context)")
[20:57:47 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.NotFoundObjectResult in 4746.4594ms.
[20:57:47 INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
[20:57:47 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 4776.1826ms
[20:57:47 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[20:57:47 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:10)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:1,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:1,vendorHttpClientName:vendor1)
[20:57:47 INF] Request finished HTTP/2 GET https://localhost:7221/api/v1/Article/1/offers?MaxArticlePrice=10 - - - 404 - text/plain;+charset=utf-8 4792.0656ms
[20:57:57 INF] Request starting HTTP/2 GET https://localhost:7221/api/v1/Article/1/offers?MaxArticlePrice=1000 - -
[20:57:57 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[20:57:57 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[20:57:57 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[20:57:57 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 19.2582ms.
[20:57:57 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[20:57:57 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 49.6125ms
[20:57:57 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[20:57:57 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:1000)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
OrderRepository -> ExistForArticle
[20:57:57 INF] Request finished HTTP/2 GET https://localhost:7221/api/v1/Article/1/offers?MaxArticlePrice=1000 - - - 200 - application/json;+charset=utf-8 58.9929ms
[20:58:06 INF] Request starting HTTP/2 GET https://localhost:7221/api/v1/Article/1/buy - -
[20:58:06 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[20:58:06 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[20:58:06 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[20:58:09 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3471.6914ms.
[20:58:09 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Order.OrderDto'.
[20:58:09 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 3495.0872ms
[20:58:09 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[20:58:09 INF] Information details: ArticleController -> Buy (id:1,customerId)=>
BuyArticleCommand -> Handle=>
ArticleRepository -> Exists=>
ArticleRepository -> Get=>
OrderRepository -> ExistForArticle=>
ArticleRepository -> Get=>
OrderRepository -> Add
[20:58:09 INF] Request finished HTTP/2 GET https://localhost:7221/api/v1/Article/1/buy - - - 200 - application/json;+charset=utf-8 3508.6084ms
[20:58:12 INF] Request starting HTTP/2 GET https://localhost:7221/api/v1/Article/1/buy - -
[20:58:12 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[20:58:12 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[20:58:12 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[20:58:12 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 3.473ms.
[20:58:12 INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
[20:58:12 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 35.027ms
[20:58:12 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[20:58:12 INF] Information details: ArticleController -> Buy (id:1,customerId)=>
BuyArticleCommand -> Handle=>
ArticleRepository -> Exists=>
ArticleRepository -> Get
[20:58:12 INF] Request finished HTTP/2 GET https://localhost:7221/api/v1/Article/1/buy - - - 400 - text/plain;+charset=utf-8 44.3958ms
[20:58:17 INF] Request starting HTTP/2 GET https://localhost:7221/api/v1/Article/1/buy - -
[20:58:17 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[20:58:17 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[20:58:17 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[20:58:17 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1.5932ms.
[20:58:17 INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
[20:58:17 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 22.5728ms
[20:58:17 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[20:58:17 INF] Information details: ArticleController -> Buy (id:1,customerId)=>
BuyArticleCommand -> Handle=>
ArticleRepository -> Exists=>
ArticleRepository -> Get
[20:58:17 INF] Request finished HTTP/2 GET https://localhost:7221/api/v1/Article/1/buy - - - 400 - text/plain;+charset=utf-8 33.6375ms
[20:58:25 INF] Request starting HTTP/2 GET https://localhost:7221/api/v1/Article/1/offers?MaxArticlePrice=1000 - -
[20:58:25 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[20:58:25 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[20:58:25 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[20:58:25 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.NotFoundObjectResult in 0.9586ms.
[20:58:25 INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
[20:58:25 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 23.4343ms
[20:58:25 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[20:58:25 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:1000)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
OrderRepository -> ExistForArticle
[20:58:25 INF] Request finished HTTP/2 GET https://localhost:7221/api/v1/Article/1/offers?MaxArticlePrice=1000 - - - 404 - text/plain;+charset=utf-8 34.9996ms
[20:58:30 INF] Request starting HTTP/2 GET https://localhost:7221/api/v1/Article/1/buy - -
[20:58:30 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[20:58:30 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[20:58:30 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[20:58:30 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 0.3763ms.
[20:58:30 INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
[20:58:30 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 20.4558ms
[20:58:30 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[20:58:30 INF] Information details: ArticleController -> Buy (id:1,customerId)=>
BuyArticleCommand -> Handle=>
ArticleRepository -> Exists=>
ArticleRepository -> Get
[20:58:30 INF] Request finished HTTP/2 GET https://localhost:7221/api/v1/Article/1/buy - - - 400 - text/plain;+charset=utf-8 29.4460ms
[20:58:42 INF] Request starting HTTP/2 GET https://localhost:7221/api/v1/Article/122/offers?MaxArticlePrice=1000 - -
[20:58:42 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[20:58:42 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[20:58:42 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[20:58:42 INF] Start processing HTTP request GET https://localhost:7221/api/v1/Article/122/exist
[20:58:42 INF] Sending HTTP request GET https://localhost:7221/api/v1/Article/122/exist
[20:58:42 INF] Request starting HTTP/1.1 GET https://localhost:7221/api/v1/Article/122/exist - -
[20:58:42 INF] Information details: 
[20:58:42 INF] Request finished HTTP/1.1 GET https://localhost:7221/api/v1/Article/122/exist - - - 404 0 - 3.5074ms
[20:58:42 INF] Received HTTP response headers after 47.3278ms - 404
[20:58:42 INF] End processing HTTP request after 51.8389ms - 404
[20:58:42 INF] Start processing HTTP request GET https://localhost:7221/api/v1/Article/122/exist
[20:58:42 INF] Sending HTTP request GET https://localhost:7221/api/v1/Article/122/exist
[20:58:42 INF] Request starting HTTP/1.1 GET https://localhost:7221/api/v1/Article/122/exist - -
[20:58:42 INF] Information details: 
[20:58:42 INF] Request finished HTTP/1.1 GET https://localhost:7221/api/v1/Article/122/exist - - - 404 0 - 1.5882ms
[20:58:42 INF] Received HTTP response headers after 37.134ms - 404
[20:58:42 INF] End processing HTTP request after 41.8471ms - 404
[20:58:46 ERR] Error details: Status(StatusCode="Unavailable", Detail="Error connecting to subchannel.", DebugException="System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|281_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Grpc.Net.Client.Balancer.Internal.SocketConnectivitySubchannelTransport.TryConnectAsync(ConnectContext context)")
[20:58:46 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.NotFoundObjectResult in 4344.1043ms.
[20:58:46 INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
[20:58:46 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 4363.6071ms
[20:58:46 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[20:58:46 INF] Information details: ArticleController -> GetOffers (id:122,maxPrice:1000)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:122,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:122,vendorHttpClientName:vendor1)
[20:58:46 INF] Request finished HTTP/2 GET https://localhost:7221/api/v1/Article/122/offers?MaxArticlePrice=1000 - - - 404 - text/plain;+charset=utf-8 4372.6303ms
[20:58:51 INF] Request starting HTTP/2 GET https://localhost:7221/api/v1/Article/122/offers?MaxArticlePrice=1000 - -
[20:58:51 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[20:58:51 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[20:58:51 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[20:58:51 INF] Start processing HTTP request GET https://localhost:7221/api/v1/Article/122/exist
[20:58:52 INF] Sending HTTP request GET https://localhost:7221/api/v1/Article/122/exist
[20:58:52 INF] Request starting HTTP/1.1 GET https://localhost:7221/api/v1/Article/122/exist - -
[20:58:52 INF] Information details: 
[20:58:52 INF] Request finished HTTP/1.1 GET https://localhost:7221/api/v1/Article/122/exist - - - 404 0 - 2.8719ms
[20:58:52 INF] Received HTTP response headers after 39.4823ms - 404
[20:58:52 INF] End processing HTTP request after 43.2961ms - 404
[20:58:52 INF] Start processing HTTP request GET https://localhost:7221/api/v1/Article/122/exist
[20:58:52 INF] Sending HTTP request GET https://localhost:7221/api/v1/Article/122/exist
[20:58:52 INF] Request starting HTTP/1.1 GET https://localhost:7221/api/v1/Article/122/exist - -
[20:58:52 INF] Information details: 
[20:58:52 INF] Request finished HTTP/1.1 GET https://localhost:7221/api/v1/Article/122/exist - - - 404 0 - 2.0483ms
[20:58:52 INF] Received HTTP response headers after 38.9752ms - 404
[20:58:52 INF] End processing HTTP request after 43.3494ms - 404
[20:58:56 ERR] Error details: Status(StatusCode="Unavailable", Detail="Error connecting to subchannel.", DebugException="System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|281_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Grpc.Net.Client.Balancer.Internal.SocketConnectivitySubchannelTransport.TryConnectAsync(ConnectContext context)")
[20:58:56 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.NotFoundObjectResult in 4334.2244ms.
[20:58:56 INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
[20:58:56 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 4356.4114ms
[20:58:56 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[20:58:56 INF] Information details: ArticleController -> GetOffers (id:122,maxPrice:1000)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:122,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:122,vendorHttpClientName:vendor1)
[20:58:56 INF] Request finished HTTP/2 GET https://localhost:7221/api/v1/Article/122/offers?MaxArticlePrice=1000 - - - 404 - text/plain;+charset=utf-8 4364.8926ms
[20:59:53 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[20:59:53 INF] Now listening on: https://localhost:7111
[20:59:53 INF] Now listening on: http://localhost:5111
[20:59:53 INF] Application started. Press Ctrl+C to shut down.
[20:59:53 INF] Hosting environment: Development
[20:59:53 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[20:59:58 INF] Request starting HTTP/2 GET https://localhost:7111/swagger - -
[20:59:58 INF] Information details: 
[20:59:58 INF] Request finished HTTP/2 GET https://localhost:7111/swagger - - - 301 0 - 70.1828ms
[20:59:58 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[20:59:58 INF] Information details: 
[20:59:58 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[20:59:58 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 202.6817ms
[20:59:58 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/swagger-ui.css - -
[20:59:58 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/swagger-ui-bundle.js - -
[20:59:58 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/swagger-ui-standalone-preset.js - -
[20:59:58 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[20:59:58 INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
[20:59:58 INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
[20:59:58 INF] Information details: 
[20:59:58 INF] Information details: 
[20:59:58 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/swagger-ui.css - - - 200 143943 text/css 103.4544ms
[20:59:58 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/swagger-ui-standalone-preset.js - - - 200 339486 text/javascript 105.7876ms
[20:59:58 INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
[20:59:58 INF] Information details: 
[20:59:58 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/swagger-ui-bundle.js - - - 200 1096145 text/javascript 154.6068ms
[20:59:58 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 165.0734ms
[20:59:58 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - -
[20:59:58 INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
[20:59:58 INF] Information details: 
[20:59:58 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - - - 200 628 image/png 3.6853ms
[20:59:58 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[20:59:59 INF] Information details: 
[20:59:59 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 165.8125ms
[21:00:20 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/register application/json 58
[21:00:20 INF] CORS policy execution successful.
[21:00:20 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation)'
[21:00:20 INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Register(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[21:00:20 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:00:21 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 471.6672ms.
[21:00:21 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthDto'.
[21:00:21 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation) in 615.3867ms
[21:00:21 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation)'
[21:00:21 INF] Information details: Register -> Login (username:public.man.321,password:string)=>
RegisterHandler -> Handle=>
ArticleRepository -> GetByUsername=>
ArticleRepository -> Add=>
TokenService -> CreateToken
[21:00:21 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/register application/json 58 - 200 - application/json;+charset=utf-8 771.0981ms
[21:00:59 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=12 - -
[21:00:59 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:00:59 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:00:59 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:00:59 INF] Start processing HTTP request GET https://localhost:7221/api/v1/Article/1/exist
[21:00:59 INF] Sending HTTP request GET https://localhost:7221/api/v1/Article/1/exist
[21:01:04 ERR] Error details: No connection could be made because the target machine actively refused it. (localhost:7221)
System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|281_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
[21:01:04 INF] Start processing HTTP request GET https://localhost:7221/api/v1/Article/1/exist
[21:01:04 INF] Sending HTTP request GET https://localhost:7221/api/v1/Article/1/exist
[21:01:09 ERR] Error details: No connection could be made because the target machine actively refused it. (localhost:7221)
System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|281_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
[21:01:13 ERR] Error details: Status(StatusCode="Unavailable", Detail="Error connecting to subchannel.", DebugException="System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|281_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Grpc.Net.Client.Balancer.Internal.SocketConnectivitySubchannelTransport.TryConnectAsync(ConnectContext context)")
[21:01:13 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.NotFoundObjectResult in 14156.4584ms.
[21:01:13 INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
[21:01:13 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 14190.5972ms
[21:01:13 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:01:13 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:12)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:1,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:1,vendorHttpClientName:vendor1)
[21:01:13 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=12 - - - 404 - text/plain;+charset=utf-8 14266.2148ms
[21:01:19 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=1200 - -
[21:01:19 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:01:19 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:01:19 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:01:19 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 15.9296ms.
[21:01:19 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[21:01:19 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 46.2665ms
[21:01:19 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:01:19 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:1200)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
OrderRepository -> ExistForArticle
[21:01:19 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=1200 - - - 200 - application/json;+charset=utf-8 58.8767ms
[21:01:29 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - -
[21:01:29 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[21:01:29 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:01:29 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:01:29 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 24.9178ms.
[21:01:29 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Order.OrderDto'.
[21:01:29 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 47.5296ms
[21:01:29 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[21:01:29 INF] Information details: ArticleController -> Buy (id:1,customerId)=>
BuyArticleCommand -> Handle=>
ArticleRepository -> Exists=>
ArticleRepository -> Get=>
OrderRepository -> ExistForArticle=>
ArticleRepository -> Get=>
OrderRepository -> Add
[21:01:29 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - - - 200 - application/json;+charset=utf-8 60.9954ms
[21:01:37 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - -
[21:01:37 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[21:01:37 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:01:37 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:01:37 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 7.8358ms.
[21:01:37 INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
[21:01:37 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 34.2995ms
[21:01:37 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[21:01:37 INF] Information details: ArticleController -> Buy (id:1,customerId)=>
BuyArticleCommand -> Handle=>
ArticleRepository -> Exists=>
ArticleRepository -> Get
[21:01:37 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - - - 400 - text/plain;+charset=utf-8 44.6330ms
[21:05:01 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[21:05:01 INF] Now listening on: https://localhost:7111
[21:05:01 INF] Now listening on: http://localhost:5111
[21:05:01 INF] Application started. Press Ctrl+C to shut down.
[21:05:01 INF] Hosting environment: Development
[21:05:01 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[21:05:05 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[21:05:06 INF] Information details: 
[21:05:06 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[21:05:06 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 1390.1446ms
[21:05:06 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[21:05:06 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 87.3453ms
[21:05:07 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[21:05:07 INF] Information details: 
[21:05:07 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 205.3124ms
[21:05:15 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 50
[21:05:15 INF] CORS policy execution successful.
[21:05:15 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[21:05:15 INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Login(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[21:05:15 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:05:15 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) in 417.7183ms
[21:05:15 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[21:05:16 ERR] Error details: Internal server error
Homework.Enigmatry.Application.Shared.Exceptions.UnclearOperationsResultException
   at Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login(AuthRequestDto requestDto, CancellationToken cancellationToken) in C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.Presentation\Controllers\AuthController.cs:line 41
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Homework.Enigmatry.Shop.Presentation.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.Presentation\Middleware\ExceptionMiddleware.cs:line 53
[21:05:16 INF] Information details: AuthController -> Login (username:string)=>
LoginHandler -> Handle=>
ArticleRepository -> GetByUsername
[21:05:16 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 50 - 500 - application/json 880.7457ms
[21:05:56 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74
[21:05:56 INF] CORS policy execution successful.
[21:05:56 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[21:05:56 INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Login(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[21:05:57 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:05:57 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 404.0219ms.
[21:05:57 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthDto'.
[21:05:57 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) in 445.1026ms
[21:05:57 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[21:05:57 INF] Information details: AuthController -> Login (username:acc-test-three@gmail.com)=>
LoginHandler -> Handle=>
ArticleRepository -> GetByUsername=>
TokenService -> CreateToken
[21:05:57 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74 - 200 - application/json;+charset=utf-8 465.8872ms
[21:06:20 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=124 - -
[21:06:20 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:06:20 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:06:20 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:06:20 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 248.2033ms.
[21:06:20 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[21:06:20 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 290.8584ms
[21:06:20 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:06:20 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:124)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
OrderRepository -> ExistForArticle
[21:06:20 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=124 - - - 200 - application/json;+charset=utf-8 365.0383ms
[21:06:26 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/13/offers?MaxArticlePrice=124 - -
[21:06:26 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:06:26 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:06:26 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:06:26 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/13/exist
[21:06:26 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/13/exist
[21:06:26 INF] Received HTTP response headers after 343.181ms - 404
[21:06:26 INF] End processing HTTP request after 352.4952ms - 404
[21:06:26 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/13/exist
[21:06:26 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/13/exist
[21:06:26 INF] Received HTTP response headers after 109.6472ms - 404
[21:06:26 INF] End processing HTTP request after 115.47ms - 404
[21:06:27 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.NotFoundObjectResult in 841.8869ms.
[21:06:27 INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
[21:06:27 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 866.5498ms
[21:06:27 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:06:27 INF] Information details: ArticleController -> GetOffers (id:13,maxPrice:124)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:13,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:13,vendorHttpClientName:vendor1)
[21:06:27 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/13/offers?MaxArticlePrice=124 - - - 404 - text/plain;+charset=utf-8 881.4254ms
[21:06:30 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/13/offers?MaxArticlePrice=124 - -
[21:06:30 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:06:30 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:06:30 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:06:30 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/13/exist
[21:06:30 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/13/exist
[21:06:30 INF] Received HTTP response headers after 89.8149ms - 404
[21:06:30 INF] End processing HTTP request after 93.9551ms - 404
[21:06:30 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/13/exist
[21:06:30 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/13/exist
[21:06:31 INF] Received HTTP response headers after 90.115ms - 200
[21:06:31 INF] End processing HTTP request after 93.9883ms - 200
[21:06:31 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/13
[21:06:31 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/13
[21:06:31 INF] Received HTTP response headers after 237.655ms - 200
[21:06:31 INF] End processing HTTP request after 242.2892ms - 200
[21:06:31 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 494.318ms.
[21:06:31 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[21:06:31 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 515.0266ms
[21:06:31 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:06:31 INF] Information details: ArticleController -> GetOffers (id:13,maxPrice:124)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:13,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:13,vendorHttpClientName:vendor1)=>
VendorRepository -> GetArticle (id:13,vendorHttpClientName:vendor2)
[21:06:31 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/13/offers?MaxArticlePrice=124 - - - 200 - application/json;+charset=utf-8 524.5732ms
[21:06:35 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/13/offers?MaxArticlePrice=124 - -
[21:06:35 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:06:35 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:06:35 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:06:35 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.4391ms.
[21:06:35 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[21:06:35 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 23.8779ms
[21:06:35 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:06:35 INF] Information details: ArticleController -> GetOffers (id:13,maxPrice:124)=>
GetArticleOfferByIdHandler -> Handle
[21:06:35 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/13/offers?MaxArticlePrice=124 - - - 200 - application/json;+charset=utf-8 33.2826ms
[21:07:08 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=124 - -
[21:07:08 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:07:08 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:07:08 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:07:08 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1.4768ms.
[21:07:08 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[21:07:08 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 29.2885ms
[21:07:08 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:07:08 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:124)=>
GetArticleOfferByIdHandler -> Handle
[21:07:08 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=124 - - - 200 - application/json;+charset=utf-8 48.9484ms
[21:07:12 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/16/offers?MaxArticlePrice=124 - -
[21:07:12 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:07:12 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:07:12 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:07:12 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/16/exist
[21:07:12 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/16/exist
[21:07:12 INF] Received HTTP response headers after 102.9362ms - 200
[21:07:12 INF] End processing HTTP request after 106.8285ms - 200
[21:07:12 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/16
[21:07:12 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/16
[21:07:12 INF] Received HTTP response headers after 77.2013ms - 200
[21:07:12 INF] End processing HTTP request after 80.4018ms - 200
[21:07:12 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/16/exist
[21:07:12 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/16/exist
[21:07:12 INF] Received HTTP response headers after 93.0263ms - 200
[21:07:12 INF] End processing HTTP request after 96.0098ms - 200
[21:07:12 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/16
[21:07:12 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/16
[21:07:12 INF] Received HTTP response headers after 92.5961ms - 200
[21:07:12 INF] End processing HTTP request after 97.68ms - 200
[21:07:12 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 424.6409ms.
[21:07:12 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[21:07:12 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 446.8146ms
[21:07:12 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:07:12 INF] Information details: ArticleController -> GetOffers (id:16,maxPrice:124)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:16,vendorHttpClientName:vendor1)=>
VendorRepository -> GetArticle (id:16,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:16,vendorHttpClientName:vendor1)=>
VendorRepository -> GetArticle (id:16,vendorHttpClientName:vendor2)
[21:07:12 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/16/offers?MaxArticlePrice=124 - - - 200 - application/json;+charset=utf-8 456.7286ms
[21:07:21 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/16/offers?MaxArticlePrice=124 - -
[21:07:21 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:07:21 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:07:21 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:07:21 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 0.6179ms.
[21:07:21 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[21:07:21 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 20.5465ms
[21:07:21 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:07:21 INF] Information details: ArticleController -> GetOffers (id:16,maxPrice:124)=>
GetArticleOfferByIdHandler -> Handle
[21:07:21 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/16/offers?MaxArticlePrice=124 - - - 200 - application/json;+charset=utf-8 29.8342ms
[21:07:24 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/161/offers?MaxArticlePrice=124 - -
[21:07:24 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:07:24 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:07:24 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:07:24 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/161/exist
[21:07:24 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/161/exist
[21:07:24 INF] Received HTTP response headers after 98.0711ms - 200
[21:07:24 INF] End processing HTTP request after 101.7133ms - 200
[21:07:24 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/161
[21:07:24 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/161
[21:07:24 INF] Received HTTP response headers after 86.9232ms - 200
[21:07:24 INF] End processing HTTP request after 90.95ms - 200
[21:07:24 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/161/exist
[21:07:24 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/161/exist
[21:07:24 INF] Received HTTP response headers after 91.8575ms - 200
[21:07:24 INF] End processing HTTP request after 95.1224ms - 200
[21:07:24 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/161
[21:07:24 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/161
[21:07:25 INF] Received HTTP response headers after 94.7728ms - 200
[21:07:25 INF] End processing HTTP request after 98.5763ms - 200
[21:07:25 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 430.9953ms.
[21:07:25 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[21:07:25 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 450.9788ms
[21:07:25 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:07:25 INF] Information details: ArticleController -> GetOffers (id:161,maxPrice:124)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:161,vendorHttpClientName:vendor1)=>
VendorRepository -> GetArticle (id:161,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:161,vendorHttpClientName:vendor1)=>
VendorRepository -> GetArticle (id:161,vendorHttpClientName:vendor2)
[21:07:25 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/161/offers?MaxArticlePrice=124 - - - 200 - application/json;+charset=utf-8 460.0149ms
[21:08:07 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/161/offers?MaxArticlePrice=124 - -
[21:08:07 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:08:07 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:08:07 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:08:47 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 39689.7321ms.
[21:08:47 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[21:08:47 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 39758.4765ms
[21:08:47 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:08:47 INF] Information details: ArticleController -> GetOffers (id:161,maxPrice:124)=>
GetArticleOfferByIdHandler -> Handle
[21:08:47 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/161/offers?MaxArticlePrice=124 - - - 200 - application/json;+charset=utf-8 39908.8875ms
[21:08:52 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1612/offers?MaxArticlePrice=124 - -
[21:08:52 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:08:52 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:08:52 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:08:53 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1612/exist
[21:08:53 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1612/exist
[21:08:53 INF] Received HTTP response headers after 105.333ms - 404
[21:08:53 INF] End processing HTTP request after 108.5443ms - 404
[21:08:53 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1612/exist
[21:08:53 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1612/exist
[21:08:53 INF] Received HTTP response headers after 85.4939ms - 200
[21:08:53 INF] End processing HTTP request after 89.1332ms - 200
[21:08:53 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1612
[21:08:53 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1612
[21:08:53 INF] Received HTTP response headers after 99.656ms - 200
[21:08:53 INF] End processing HTTP request after 104.0759ms - 200
[21:08:54 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1990.2125ms.
[21:08:54 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[21:08:54 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 2010.3938ms
[21:08:54 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:08:54 INF] Information details: ArticleController -> GetOffers (id:1612,maxPrice:124)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:1612,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:1612,vendorHttpClientName:vendor1)=>
VendorRepository -> GetArticle (id:1612,vendorHttpClientName:vendor2)
[21:08:54 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1612/offers?MaxArticlePrice=124 - - - 200 - application/json;+charset=utf-8 2017.6814ms
[21:08:58 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1612/offers?MaxArticlePrice=124 - -
[21:08:58 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:08:58 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:08:58 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:09:00 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2125.2553ms.
[21:09:00 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[21:09:00 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 2148.0127ms
[21:09:00 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:09:00 INF] Information details: ArticleController -> GetOffers (id:1612,maxPrice:124)=>
GetArticleOfferByIdHandler -> Handle
[21:09:00 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1612/offers?MaxArticlePrice=124 - - - 200 - application/json;+charset=utf-8 2155.5344ms
[21:09:05 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/16121/offers?MaxArticlePrice=124 - -
[21:09:05 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:09:05 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:09:05 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:09:59 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/16121/exist
[21:09:59 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/16121/exist
[21:09:59 INF] Received HTTP response headers after 203.8194ms - 404
[21:09:59 INF] End processing HTTP request after 274.0464ms - 404
[21:09:59 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/16121/exist
[21:09:59 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/16121/exist
[21:09:59 INF] Received HTTP response headers after 87.7621ms - 404
[21:09:59 INF] End processing HTTP request after 90.9673ms - 404
[21:10:00 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 54727.9718ms
[21:10:00 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:10:00 ERR] Error details: Unknown error
[21:10:00 INF] Information details: ArticleController -> GetOffers (id:16121,maxPrice:124)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:16121,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:16121,vendorHttpClientName:vendor1)
[21:10:00 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/16121/offers?MaxArticlePrice=124 - - - 500 - application/json 55290.9434ms
[21:10:12 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/16121/offers?MaxArticlePrice=124 - -
[21:10:12 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:10:12 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:10:12 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:10:14 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/16121/exist
[21:10:14 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/16121/exist
[21:10:15 INF] Received HTTP response headers after 77.8485ms - 404
[21:10:15 INF] End processing HTTP request after 81.3098ms - 404
[21:10:15 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/16121/exist
[21:10:15 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/16121/exist
[21:10:15 INF] Received HTTP response headers after 74.4855ms - 404
[21:10:15 INF] End processing HTTP request after 77.6114ms - 404
[21:10:15 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 2908.05ms
[21:10:16 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:10:16 ERR] Error details: Unknown error
[21:10:16 INF] Information details: ArticleController -> GetOffers (id:16121,maxPrice:124)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:16121,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:16121,vendorHttpClientName:vendor1)
[21:10:16 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/16121/offers?MaxArticlePrice=124 - - - 500 - application/json 3576.0506ms
[21:10:30 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/161212/offers?MaxArticlePrice=124 - -
[21:10:30 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:10:30 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:10:30 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:11:04 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/161212/exist
[21:11:04 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/161212/exist
[21:11:04 INF] Received HTTP response headers after 132.744ms - 200
[21:11:04 INF] End processing HTTP request after 149.6234ms - 200
[21:11:35 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/161212
[21:11:35 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/161212
[21:11:35 INF] Received HTTP response headers after 90.3217ms - 200
[21:11:35 INF] End processing HTTP request after 95.4973ms - 200
[21:15:03 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[21:15:04 INF] Now listening on: https://localhost:7111
[21:15:04 INF] Now listening on: http://localhost:5111
[21:15:04 INF] Application started. Press Ctrl+C to shut down.
[21:15:04 INF] Hosting environment: Development
[21:15:04 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[21:15:07 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[21:15:07 INF] Information details: 
[21:15:07 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[21:15:07 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 490.6111ms
[21:15:07 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[21:15:08 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 358.5413ms
[21:15:08 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[21:15:09 INF] Information details: 
[21:15:09 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 172.4062ms
[21:15:14 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[21:15:14 INF] Information details: 
[21:15:14 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[21:15:14 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 18.9780ms
[21:15:14 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[21:15:14 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 32.5093ms
[21:15:15 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[21:15:15 INF] Information details: 
[21:15:15 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 7.3417ms
[21:15:30 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74
[21:15:30 INF] CORS policy execution successful.
[21:15:30 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[21:15:30 INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Login(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[21:15:30 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:15:31 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 445.8372ms.
[21:15:31 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthDto'.
[21:15:31 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) in 592.5805ms
[21:15:31 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[21:15:31 INF] Information details: AuthController -> Login (username:acc-test-three@gmail.com)=>
LoginHandler -> Handle=>
ArticleRepository -> GetByUsername=>
TokenService -> CreateToken
[21:15:31 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74 - 200 - application/json;+charset=utf-8 753.9073ms
[21:15:51 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=100 - -
[21:15:51 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:15:51 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:15:51 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:15:58 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 6474.2756ms.
[21:15:58 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[21:15:58 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 6519.6734ms
[21:15:58 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:15:58 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:100)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
OrderRepository -> ExistForArticle
[21:15:58 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=100 - - - 200 - application/json;+charset=utf-8 6595.3051ms
[21:16:04 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/122/offers?MaxArticlePrice=100 - -
[21:16:04 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:16:04 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:16:04 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:16:13 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/122/exist
[21:16:13 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/122/exist
[21:16:13 INF] Received HTTP response headers after 334.1928ms - 200
[21:16:13 INF] End processing HTTP request after 342.6933ms - 200
[21:16:20 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/122
[21:16:20 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/122
[21:16:20 INF] Received HTTP response headers after 198.0039ms - 200
[21:16:20 INF] End processing HTTP request after 201.2134ms - 200
[21:16:54 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/122/exist
[21:16:54 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/122/exist
[21:16:55 INF] Received HTTP response headers after 147.4627ms - 200
[21:16:55 INF] End processing HTTP request after 150.4925ms - 200
[21:16:57 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/122
[21:16:57 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/122
[21:16:57 INF] Received HTTP response headers after 133.6723ms - 200
[21:16:57 INF] End processing HTTP request after 137.1569ms - 200
[21:19:30 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[21:19:30 INF] Now listening on: https://localhost:7111
[21:19:30 INF] Now listening on: http://localhost:5111
[21:19:30 INF] Application started. Press Ctrl+C to shut down.
[21:19:30 INF] Hosting environment: Development
[21:19:30 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[21:19:36 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[21:19:37 INF] Information details: 
[21:19:37 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[21:19:37 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 428.6680ms
[21:19:37 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[21:19:37 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 208.1056ms
[21:19:37 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - -
[21:19:37 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[21:19:37 INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
[21:19:37 INF] Information details: 
[21:19:37 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - - - 0 628 image/png 241.2873ms
[21:19:38 INF] Information details: 
[21:19:38 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 211.6541ms
[21:20:01 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74
[21:20:01 INF] CORS policy execution successful.
[21:20:02 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[21:20:02 INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Login(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[21:20:02 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:20:02 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 431.3866ms.
[21:20:02 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthDto'.
[21:20:02 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) in 561.5372ms
[21:20:02 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[21:20:02 INF] Information details: AuthController -> Login (username:acc-test-three@gmail.com)=>
LoginHandler -> Handle=>
ArticleRepository -> GetByUsername=>
TokenService -> CreateToken
[21:20:02 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74 - 200 - application/json;+charset=utf-8 743.3016ms
[21:20:23 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/122/offers?MaxArticlePrice=1222 - -
[21:20:23 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:20:23 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:20:23 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:20:36 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/122/exist
[21:20:36 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/122/exist
[21:20:36 INF] Received HTTP response headers after 328.8331ms - 404
[21:20:36 INF] End processing HTTP request after 337.7539ms - 404
[21:20:39 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/122/exist
[21:20:39 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/122/exist
[21:20:39 INF] Received HTTP response headers after 124.7237ms - 200
[21:20:39 INF] End processing HTTP request after 128.1143ms - 200
[21:20:44 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/122
[21:20:44 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/122
[21:20:45 INF] Received HTTP response headers after 252.5001ms - 200
[21:20:45 INF] End processing HTTP request after 255.7723ms - 200
[21:21:27 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[21:21:28 INF] Now listening on: https://localhost:7111
[21:21:28 INF] Now listening on: http://localhost:5111
[21:21:28 INF] Application started. Press Ctrl+C to shut down.
[21:21:28 INF] Hosting environment: Development
[21:21:28 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[21:21:32 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[21:21:32 INF] Information details: 
[21:21:32 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[21:21:32 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 290.1872ms
[21:21:32 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[21:21:33 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 157.3923ms
[21:21:33 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[21:21:33 INF] Information details: 
[21:21:33 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 147.4503ms
[21:21:59 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74
[21:21:59 INF] CORS policy execution successful.
[21:21:59 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[21:21:59 INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Login(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[21:21:59 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:21:59 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 435.8008ms.
[21:21:59 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthDto'.
[21:21:59 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) in 562.6758ms
[21:21:59 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[21:21:59 INF] Information details: AuthController -> Login (username:acc-test-three@gmail.com)=>
LoginHandler -> Handle=>
ArticleRepository -> GetByUsername=>
TokenService -> CreateToken
[21:21:59 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74 - 200 - application/json;+charset=utf-8 740.9526ms
[21:22:20 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/123/offers?MaxArticlePrice=1222 - -
[21:22:20 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:22:20 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:22:20 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:22:28 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/123/exist
[21:22:28 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/123/exist
[21:22:29 INF] Received HTTP response headers after 353.3124ms - 200
[21:22:29 INF] End processing HTTP request after 362.7909ms - 200
[21:22:34 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/123
[21:22:34 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/123
[21:22:35 INF] Received HTTP response headers after 266.1954ms - 200
[21:22:35 INF] End processing HTTP request after 269.91ms - 200
[21:22:44 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/123/exist
[21:22:44 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/123/exist
[21:22:44 INF] Received HTTP response headers after 102.2985ms - 200
[21:22:44 INF] End processing HTTP request after 106.233ms - 200
[21:22:45 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/123
[21:22:45 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/123
[21:22:46 INF] Received HTTP response headers after 114.6214ms - 200
[21:22:46 INF] End processing HTTP request after 118.6354ms - 200
[21:23:22 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 61704.5424ms.
[21:23:22 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[21:23:22 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 61742.3179ms
[21:23:22 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:23:22 INF] Information details: ArticleController -> GetOffers (id:123,maxPrice:1222)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:123,vendorHttpClientName:vendor1)=>
VendorRepository -> GetArticle (id:123,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:123,vendorHttpClientName:vendor1)=>
VendorRepository -> GetArticle (id:123,vendorHttpClientName:vendor2)
[21:23:22 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/123/offers?MaxArticlePrice=1222 - - - 200 - application/json;+charset=utf-8 61824.2674ms
[21:23:29 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/123/offers?MaxArticlePrice=1222 - -
[21:23:29 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:23:29 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:23:29 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:23:32 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2643.8077ms.
[21:23:32 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[21:23:32 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 2664.2505ms
[21:23:32 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:23:32 INF] Information details: ArticleController -> GetOffers (id:123,maxPrice:1222)=>
GetArticleOfferByIdHandler -> Handle
[21:23:32 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/123/offers?MaxArticlePrice=1222 - - - 200 - application/json;+charset=utf-8 2674.8542ms
[21:23:39 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/123/buy - -
[21:23:39 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[21:23:39 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:23:40 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:23:40 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 28.0705ms.
[21:23:40 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Order.OrderDto'.
[21:23:40 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 86.9759ms
[21:23:40 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[21:23:40 INF] Information details: ArticleController -> Buy (id:123,customerId)=>
BuyArticleCommand -> Handle=>
ArticleRepository -> Exists=>
ArticleRepository -> Get=>
OrderRepository -> ExistForArticle=>
ArticleRepository -> Get=>
OrderRepository -> Add
[21:23:40 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/123/buy - - - 200 - application/json;+charset=utf-8 102.8316ms
[21:23:44 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/123/buy - -
[21:23:44 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[21:23:44 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:23:44 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:23:44 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 8.309ms.
[21:23:44 INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
[21:23:44 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 28.7342ms
[21:23:44 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[21:23:44 INF] Information details: ArticleController -> Buy (id:123,customerId)=>
BuyArticleCommand -> Handle=>
ArticleRepository -> Exists=>
ArticleRepository -> Get
[21:23:44 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/123/buy - - - 400 - text/plain;+charset=utf-8 35.9486ms
[21:23:48 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/123/offers?MaxArticlePrice=1222 - -
[21:23:48 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:23:48 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:23:48 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:23:51 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/123/exist
[21:23:51 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/123/exist
[21:23:51 INF] Received HTTP response headers after 129.372ms - 200
[21:23:51 INF] End processing HTTP request after 186.7937ms - 200
[21:23:51 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/123
[21:23:51 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/123
[21:23:51 INF] Received HTTP response headers after 89.0779ms - 200
[21:23:51 INF] End processing HTTP request after 92.474ms - 200
[21:23:53 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/123/exist
[21:23:53 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/123/exist
[21:23:54 INF] Received HTTP response headers after 95.5263ms - 200
[21:23:54 INF] End processing HTTP request after 98.9507ms - 200
[21:23:54 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/123
[21:23:54 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/123
[21:23:54 INF] Received HTTP response headers after 107.5197ms - 200
[21:23:54 INF] End processing HTTP request after 110.7787ms - 200
[21:23:57 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 9013.8954ms.
[21:23:57 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[21:23:57 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 9033.7646ms
[21:23:57 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:23:57 INF] Information details: ArticleController -> GetOffers (id:123,maxPrice:1222)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:123,vendorHttpClientName:vendor1)=>
VendorRepository -> GetArticle (id:123,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:123,vendorHttpClientName:vendor1)=>
VendorRepository -> GetArticle (id:123,vendorHttpClientName:vendor2)
[21:23:57 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/123/offers?MaxArticlePrice=1222 - - - 200 - application/json;+charset=utf-8 9041.6935ms
[21:24:04 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/123/buy - -
[21:24:04 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[21:24:04 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:24:04 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:24:04 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2.3773ms.
[21:24:04 INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
[21:24:04 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 24.7419ms
[21:24:04 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[21:24:04 INF] Information details: ArticleController -> Buy (id:123,customerId)=>
BuyArticleCommand -> Handle=>
ArticleRepository -> Exists=>
ArticleRepository -> Get=>
OrderRepository -> ExistForArticle
[21:24:04 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/123/buy - - - 400 - text/plain;+charset=utf-8 34.5297ms
[21:24:28 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1232/offers?MaxArticlePrice=1222 - -
[21:24:28 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:24:28 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:24:28 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:24:32 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1232/exist
[21:24:32 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1232/exist
[21:24:32 INF] Received HTTP response headers after 102.1262ms - 404
[21:24:32 INF] End processing HTTP request after 105.1983ms - 404
[21:24:32 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1232/exist
[21:24:32 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1232/exist
[21:24:32 INF] Received HTTP response headers after 83.4646ms - 200
[21:24:32 INF] End processing HTTP request after 86.5556ms - 200
[21:24:32 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1232
[21:24:32 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1232
[21:24:32 INF] Received HTTP response headers after 93.6573ms - 200
[21:24:32 INF] End processing HTTP request after 96.8715ms - 200
[21:24:35 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 7544.7173ms.
[21:24:35 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[21:24:35 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 7562.1486ms
[21:24:35 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:24:35 INF] Information details: ArticleController -> GetOffers (id:1232,maxPrice:1222)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:1232,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:1232,vendorHttpClientName:vendor1)=>
VendorRepository -> GetArticle (id:1232,vendorHttpClientName:vendor2)
[21:24:35 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1232/offers?MaxArticlePrice=1222 - - - 200 - application/json;+charset=utf-8 7569.3105ms
[21:24:43 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1232/offers?MaxArticlePrice=12 - -
[21:24:43 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:24:43 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:24:43 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:24:43 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1232/exist
[21:24:43 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1232/exist
[21:24:43 INF] Received HTTP response headers after 80.4531ms - 200
[21:24:43 INF] End processing HTTP request after 84.6998ms - 200
[21:24:43 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1232
[21:24:43 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1232
[21:24:43 INF] Received HTTP response headers after 81.6082ms - 200
[21:24:43 INF] End processing HTTP request after 84.3845ms - 200
[21:24:43 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1232/exist
[21:24:43 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1232/exist
[21:24:43 INF] Received HTTP response headers after 73.7483ms - 200
[21:24:43 INF] End processing HTTP request after 77.2279ms - 200
[21:24:43 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1232
[21:24:43 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1232
[21:24:43 INF] Received HTTP response headers after 87.0082ms - 200
[21:24:43 INF] End processing HTTP request after 92.4575ms - 200
[21:24:43 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.NotFoundObjectResult in 379.9059ms.
[21:24:43 INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
[21:24:43 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 398.4999ms
[21:24:43 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:24:43 INF] Information details: ArticleController -> GetOffers (id:1232,maxPrice:12)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:1232,vendorHttpClientName:vendor1)=>
VendorRepository -> GetArticle (id:1232,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:1232,vendorHttpClientName:vendor1)=>
VendorRepository -> GetArticle (id:1232,vendorHttpClientName:vendor2)
[21:24:43 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1232/offers?MaxArticlePrice=12 - - - 404 - text/plain;+charset=utf-8 406.2388ms
[21:24:50 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1232/offers?MaxArticlePrice=122 - -
[21:24:50 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:24:50 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:24:50 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:24:50 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 0.9638ms.
[21:24:50 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[21:24:50 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 29.4528ms
[21:24:50 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:24:50 INF] Information details: ArticleController -> GetOffers (id:1232,maxPrice:122)=>
GetArticleOfferByIdHandler -> Handle
[21:24:50 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1232/offers?MaxArticlePrice=122 - - - 200 - application/json;+charset=utf-8 36.6979ms
[21:24:54 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/123/buy - -
[21:24:54 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[21:24:54 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:24:54 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:24:54 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 0.451ms.
[21:24:54 INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
[21:24:54 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 19.8368ms
[21:24:54 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[21:24:54 INF] Information details: ArticleController -> Buy (id:123,customerId)=>
BuyArticleCommand -> Handle=>
ArticleRepository -> Exists=>
ArticleRepository -> Get=>
OrderRepository -> ExistForArticle
[21:24:54 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/123/buy - - - 400 - text/plain;+charset=utf-8 28.5558ms
[21:25:00 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1232/buy - -
[21:25:00 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[21:25:00 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:25:00 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:25:00 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 0.5087ms.
[21:25:00 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Order.OrderDto'.
[21:25:00 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 19.2048ms
[21:25:00 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[21:25:00 INF] Information details: ArticleController -> Buy (id:1232,customerId)=>
BuyArticleCommand -> Handle=>
ArticleRepository -> Exists=>
ArticleRepository -> Get=>
OrderRepository -> ExistForArticle=>
ArticleRepository -> Get=>
OrderRepository -> Add
[21:25:00 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1232/buy - - - 200 - application/json;+charset=utf-8 27.2796ms
[21:25:03 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1232/buy - -
[21:25:03 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[21:25:03 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:25:03 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:25:03 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 0.5465ms.
[21:25:03 INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
[21:25:03 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 22.5393ms
[21:25:03 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[21:25:03 INF] Information details: ArticleController -> Buy (id:1232,customerId)=>
BuyArticleCommand -> Handle=>
ArticleRepository -> Exists=>
ArticleRepository -> Get
[21:25:03 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1232/buy - - - 400 - text/plain;+charset=utf-8 30.9071ms
[21:25:09 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1232/offers?MaxArticlePrice=122 - -
[21:25:09 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:25:09 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:25:09 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:25:09 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1232/exist
[21:25:09 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1232/exist
[21:25:09 INF] Received HTTP response headers after 89.2003ms - 200
[21:25:09 INF] End processing HTTP request after 93.2711ms - 200
[21:25:09 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1232
[21:25:09 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1232
[21:25:09 INF] Received HTTP response headers after 94.793ms - 200
[21:25:09 INF] End processing HTTP request after 97.6558ms - 200
[21:25:09 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1232/exist
[21:25:09 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1232/exist
[21:25:10 INF] Received HTTP response headers after 75.0814ms - 200
[21:25:10 INF] End processing HTTP request after 77.8808ms - 200
[21:25:10 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1232
[21:25:10 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1232
[21:25:10 INF] Received HTTP response headers after 89.1141ms - 200
[21:25:10 INF] End processing HTTP request after 92.095ms - 200
[21:25:10 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 435.5781ms.
[21:25:10 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[21:25:10 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 454.8702ms
[21:25:10 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:25:10 INF] Information details: ArticleController -> GetOffers (id:1232,maxPrice:122)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:1232,vendorHttpClientName:vendor1)=>
VendorRepository -> GetArticle (id:1232,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:1232,vendorHttpClientName:vendor1)=>
VendorRepository -> GetArticle (id:1232,vendorHttpClientName:vendor2)
[21:25:10 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1232/offers?MaxArticlePrice=122 - - - 200 - application/json;+charset=utf-8 464.5902ms
[21:25:13 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1232/buy - -
[21:25:13 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[21:25:13 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:25:13 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:25:13 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 0.6121ms.
[21:25:13 INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
[21:25:13 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 21.0558ms
[21:25:13 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[21:25:13 INF] Information details: ArticleController -> Buy (id:1232,customerId)=>
BuyArticleCommand -> Handle=>
ArticleRepository -> Exists=>
ArticleRepository -> Get=>
OrderRepository -> ExistForArticle
[21:25:13 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1232/buy - - - 400 - text/plain;+charset=utf-8 29.3134ms
[21:55:06 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[21:55:06 INF] Now listening on: https://localhost:7111
[21:55:06 INF] Now listening on: http://localhost:5111
[21:55:06 INF] Application started. Press Ctrl+C to shut down.
[21:55:06 INF] Hosting environment: Development
[21:55:06 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[21:55:09 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[21:55:09 INF] Information details: 
[21:55:09 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[21:55:10 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[21:55:10 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 1558.0091ms
[21:55:10 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - -
[21:55:11 INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
[21:55:11 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 369.1397ms
[21:55:11 INF] Information details: 
[21:55:11 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - - - 0 628 image/png 207.7536ms
[21:55:11 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[21:55:11 INF] Information details: 
[21:55:11 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 220.3936ms
[21:55:51 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74
[21:55:51 INF] CORS policy execution successful.
[21:55:51 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[21:55:51 INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Login(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[21:55:51 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:55:51 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 414.4751ms.
[21:55:51 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthDto'.
[21:55:51 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) in 534.833ms
[21:55:51 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[21:55:51 INF] Information details: AuthController -> Login (username:acc-test-three@gmail.com)=>
LoginHandler -> Handle=>
ArticleRepository -> GetByUsername=>
TokenService -> CreateToken
[21:55:51 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74 - 200 - application/json;+charset=utf-8 698.7531ms
[21:56:08 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers - -
[21:56:08 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:56:08 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:56:08 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:56:08 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 215.0275ms.
[21:56:08 INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
[21:56:08 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 248.2363ms
[21:56:08 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:56:08 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:0)=>
GetArticleOfferByIdHandler -> Handle
[21:56:08 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers - - - 400 - text/plain;+charset=utf-8 320.7804ms
[21:56:14 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=1 - -
[21:56:14 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:56:14 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:56:14 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:56:14 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[21:56:14 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[21:56:14 INF] Received HTTP response headers after 329.4204ms - 200
[21:56:14 INF] End processing HTTP request after 342.2729ms - 200
[21:56:14 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1
[21:56:14 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1
[21:56:15 INF] Received HTTP response headers after 224.8612ms - 200
[21:56:15 INF] End processing HTTP request after 228.7715ms - 200
[21:56:15 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[21:56:15 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[21:56:15 INF] Received HTTP response headers after 106.1549ms - 200
[21:56:15 INF] End processing HTTP request after 110.4408ms - 200
[21:56:15 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1
[21:56:15 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1
[21:56:15 INF] Received HTTP response headers after 95.2161ms - 200
[21:56:15 INF] End processing HTTP request after 99.6076ms - 200
[21:56:16 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 1904.4689ms
[21:56:16 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:56:17 ERR] Error details: Unknown error
[21:56:17 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:1)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:1,vendorHttpClientName:vendor1)=>
VendorRepository -> GetArticle (id:1,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:1,vendorHttpClientName:vendor2)=>
VendorRepository -> GetArticle (id:1,vendorHttpClientName:vendor2)
[21:56:17 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=1 - - - 500 - application/json 2487.8310ms
[21:56:25 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=1 - -
[21:56:25 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:56:25 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:56:25 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:56:25 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[21:56:25 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[21:56:25 INF] Received HTTP response headers after 103.7372ms - 200
[21:56:25 INF] End processing HTTP request after 107.707ms - 200
[21:56:25 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1
[21:56:25 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1
[21:56:25 INF] Received HTTP response headers after 89.1384ms - 200
[21:56:25 INF] End processing HTTP request after 92.4082ms - 200
[21:56:25 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[21:56:25 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[21:56:26 INF] Received HTTP response headers after 92.8764ms - 200
[21:56:26 INF] End processing HTTP request after 98.1128ms - 200
[21:56:26 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1
[21:56:26 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1
[21:56:26 INF] Received HTTP response headers after 85.8946ms - 200
[21:56:26 INF] End processing HTTP request after 91.1142ms - 200
[21:56:26 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 1105.4982ms
[21:56:27 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:56:27 ERR] Error details: Unknown error
[21:56:27 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:1)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:1,vendorHttpClientName:vendor1)=>
VendorRepository -> GetArticle (id:1,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:1,vendorHttpClientName:vendor2)=>
VendorRepository -> GetArticle (id:1,vendorHttpClientName:vendor2)
[21:56:27 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=1 - - - 500 - application/json 1759.6825ms
[21:56:56 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=1 - -
[21:56:56 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:56:56 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:56:56 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:57:29 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[21:57:29 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[21:57:29 INF] Received HTTP response headers after 87.968ms - 200
[21:57:29 INF] End processing HTTP request after 125.5326ms - 200
[21:57:29 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1
[21:57:29 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1
[21:57:29 INF] Received HTTP response headers after 81.7632ms - 200
[21:57:29 INF] End processing HTTP request after 85.124ms - 200
[21:57:29 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[21:57:29 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[21:57:29 INF] Received HTTP response headers after 91.52ms - 200
[21:57:29 INF] End processing HTTP request after 94.2567ms - 200
[21:57:29 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1
[21:57:29 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1
[21:57:30 INF] Received HTTP response headers after 86.9082ms - 200
[21:57:30 INF] End processing HTTP request after 90.2251ms - 200
[21:57:30 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 34293.5372ms
[21:57:30 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:57:31 ERR] Error details: Unknown error
[21:57:31 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:1)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:1,vendorHttpClientName:vendor1)=>
VendorRepository -> GetArticle (id:1,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:1,vendorHttpClientName:vendor2)=>
VendorRepository -> GetArticle (id:1,vendorHttpClientName:vendor2)
[21:57:31 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=1 - - - 500 - application/json 34822.6925ms
[21:58:27 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[21:58:27 INF] Now listening on: https://localhost:7111
[21:58:27 INF] Now listening on: http://localhost:5111
[21:58:27 INF] Application started. Press Ctrl+C to shut down.
[21:58:27 INF] Hosting environment: Development
[21:58:27 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[21:58:32 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[21:58:32 INF] Information details: 
[21:58:32 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[21:58:32 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 305.3059ms
[21:58:32 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[21:58:33 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 249.6156ms
[21:58:33 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[21:58:33 INF] Information details: 
[21:58:33 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 234.5918ms
[21:58:58 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74
[21:58:58 INF] CORS policy execution successful.
[21:58:58 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[21:58:58 INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Login(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[21:58:58 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:58:59 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 389.789ms.
[21:58:59 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthDto'.
[21:58:59 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) in 531.184ms
[21:58:59 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[21:58:59 INF] Information details: AuthController -> Login (username:acc-test-three@gmail.com)=>
LoginHandler -> Handle=>
ArticleRepository -> GetByUsername=>
TokenService -> CreateToken
[21:58:59 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74 - 200 - application/json;+charset=utf-8 696.6741ms
[21:59:17 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=1 - -
[21:59:17 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:59:17 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:59:17 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:59:19 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[21:59:19 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[21:59:19 INF] Received HTTP response headers after 398.0957ms - 200
[21:59:19 INF] End processing HTTP request after 405.4148ms - 200
[21:59:19 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1
[21:59:19 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1
[21:59:20 INF] Received HTTP response headers after 248.2324ms - 200
[21:59:20 INF] End processing HTTP request after 251.902ms - 200
[21:59:20 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[21:59:20 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[21:59:20 INF] Received HTTP response headers after 107.2732ms - 200
[21:59:20 INF] End processing HTTP request after 111.0073ms - 200
[21:59:20 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1
[21:59:20 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1
[21:59:20 INF] Received HTTP response headers after 105.5764ms - 200
[21:59:20 INF] End processing HTTP request after 108.8698ms - 200
[21:59:33 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 16018.9145ms
[21:59:33 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:59:33 ERR] Error details: Unknown error
[21:59:33 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:1)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:1,vendorHttpClientName:vendor1)=>
VendorRepository -> GetArticle (id:1,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:1,vendorHttpClientName:vendor2)=>
VendorRepository -> GetArticle (id:1,vendorHttpClientName:vendor2)
[21:59:33 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=1 - - - 500 - application/json 16806.4813ms
[21:59:35 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=1 - -
[21:59:35 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[21:59:35 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[21:59:35 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[21:59:37 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[21:59:37 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[21:59:37 INF] Received HTTP response headers after 125.2067ms - 200
[21:59:37 INF] End processing HTTP request after 129.3426ms - 200
[21:59:37 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1
[21:59:37 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1
[21:59:37 INF] Received HTTP response headers after 98.6601ms - 200
[21:59:37 INF] End processing HTTP request after 104.6839ms - 200
[21:59:37 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[21:59:37 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[21:59:37 INF] Received HTTP response headers after 107.9703ms - 200
[21:59:37 INF] End processing HTTP request after 110.9478ms - 200
[21:59:37 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1
[21:59:37 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1
[21:59:37 INF] Received HTTP response headers after 85.5201ms - 200
[21:59:37 INF] End processing HTTP request after 88.4221ms - 200
[22:00:01 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[22:00:02 INF] Now listening on: https://localhost:7111
[22:00:02 INF] Now listening on: http://localhost:5111
[22:00:02 INF] Application started. Press Ctrl+C to shut down.
[22:00:02 INF] Hosting environment: Development
[22:00:02 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[22:00:04 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[22:00:05 INF] Information details: 
[22:00:05 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[22:00:05 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 604.0923ms
[22:00:05 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[22:00:05 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 140.8831ms
[22:00:06 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[22:00:06 INF] Information details: 
[22:00:06 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 272.1844ms
[22:00:26 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=1 - -
[22:00:26 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[22:00:26 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[22:00:26 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[22:00:29 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[22:00:29 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[22:00:29 INF] Received HTTP response headers after 320.9812ms - 200
[22:00:29 INF] End processing HTTP request after 330.3884ms - 200
[22:00:29 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1
[22:00:29 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1
[22:00:29 INF] Received HTTP response headers after 215.2317ms - 200
[22:00:29 INF] End processing HTTP request after 219.5358ms - 200
[22:00:29 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[22:00:29 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[22:00:29 INF] Received HTTP response headers after 111.6239ms - 200
[22:00:29 INF] End processing HTTP request after 116.4882ms - 200
[22:00:29 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1
[22:00:29 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1
[22:00:29 INF] Received HTTP response headers after 89.698ms - 200
[22:00:29 INF] End processing HTTP request after 93.4681ms - 200
[22:01:24 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.NotFoundObjectResult in 58030.2807ms.
[22:01:24 INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
[22:01:24 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 58159.5934ms
[22:01:24 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[22:01:24 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:1)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:1,vendorHttpClientName:vendor1)=>
VendorRepository -> GetArticle (id:1,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:1,vendorHttpClientName:vendor2)=>
VendorRepository -> GetArticle (id:1,vendorHttpClientName:vendor2)=>
VendorGrpcRepository -> IsArticleExist (id:1)=>
VendorGrpcRepository -> GetArticle (id:1)
[22:01:24 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=1 - - - 404 - text/plain;+charset=utf-8 58572.0191ms
[22:01:30 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=26 - -
[22:01:30 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[22:01:30 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[22:01:30 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[22:01:32 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1983.2781ms.
[22:01:32 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[22:01:32 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 2021.1905ms
[22:01:32 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[22:01:32 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:26)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
OrderRepository -> ExistForArticle
[22:01:32 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=26 - - - 200 - application/json;+charset=utf-8 2035.5119ms
[22:01:42 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/25/buy - -
[22:01:42 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[22:01:42 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[22:01:42 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[22:01:42 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 23.8696ms.
[22:01:42 INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
[22:01:42 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 46.9858ms
[22:01:42 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[22:01:42 INF] Information details: ArticleController -> Buy (id:25,customerId)=>
BuyArticleCommand -> Handle=>
ArticleRepository -> Exists=>
ArticleRepository -> Get
[22:01:42 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/25/buy - - - 400 - text/plain;+charset=utf-8 62.4339ms
[22:01:49 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - -
[22:01:49 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[22:01:49 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[22:01:49 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[22:01:49 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 9.9338ms.
[22:01:49 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Order.OrderDto'.
[22:01:49 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 33.9865ms
[22:01:49 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[22:01:49 INF] Information details: ArticleController -> Buy (id:1,customerId)=>
BuyArticleCommand -> Handle=>
ArticleRepository -> Exists=>
ArticleRepository -> Get=>
OrderRepository -> ExistForArticle=>
ArticleRepository -> Get=>
OrderRepository -> Add
[22:01:49 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - - - 200 - application/json;+charset=utf-8 42.9180ms
[22:01:53 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=26 - -
[22:01:53 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[22:01:53 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[22:01:53 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[22:01:56 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.NotFoundObjectResult in 3327.5191ms.
[22:01:56 INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
[22:01:56 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 3375.1108ms
[22:01:56 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[22:01:56 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:26)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
OrderRepository -> ExistForArticle
[22:01:56 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=26 - - - 404 - text/plain;+charset=utf-8 3383.5335ms
[22:02:01 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - -
[22:02:01 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[22:02:01 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[22:02:01 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[22:02:01 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1.6492ms.
[22:02:01 INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
[22:02:01 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 23.2182ms
[22:02:01 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[22:02:01 INF] Information details: ArticleController -> Buy (id:1,customerId)=>
BuyArticleCommand -> Handle=>
ArticleRepository -> Exists=>
ArticleRepository -> Get
[22:02:01 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - - - 400 - text/plain;+charset=utf-8 34.1820ms
[22:03:51 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[22:03:51 INF] Now listening on: https://localhost:7111
[22:03:51 INF] Now listening on: http://localhost:5111
[22:03:51 INF] Application started. Press Ctrl+C to shut down.
[22:03:51 INF] Hosting environment: Development
[22:03:51 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[22:03:55 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[22:03:55 INF] Information details: 
[22:03:55 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[22:03:55 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 407.2741ms
[22:03:55 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[22:03:56 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 247.4155ms
[22:03:56 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[22:03:56 INF] Information details: 
[22:03:56 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 162.9407ms
[22:04:09 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/register application/json 50
[22:04:09 INF] CORS policy execution successful.
[22:04:09 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation)'
[22:04:09 INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Register(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[22:04:09 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[22:04:10 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation) in 462.8365ms
[22:04:10 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation)'
[22:04:10 ERR] Error details: Internal server error
Homework.Enigmatry.Application.Shared.Exceptions.UnclearOperationsResultException
   at Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register(AuthRequestDto requestDto, CancellationToken cancellationToken) in C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.Presentation\Controllers\AuthController.cs:line 62
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Homework.Enigmatry.Shop.Presentation.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.Presentation\Middleware\ExceptionMiddleware.cs:line 53
[22:04:10 INF] Information details: Register -> Login (username:string,password:string)=>
RegisterHandler -> Handle
[22:04:10 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/register application/json 50 - 500 - application/json 962.4150ms
[22:05:31 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[22:05:32 INF] Now listening on: https://localhost:7111
[22:05:32 INF] Now listening on: http://localhost:5111
[22:05:32 INF] Application started. Press Ctrl+C to shut down.
[22:05:32 INF] Hosting environment: Development
[22:05:32 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[22:05:35 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[22:05:35 INF] Information details: 
[22:05:35 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[22:05:35 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 459.3571ms
[22:05:36 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[22:05:36 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 170.6741ms
[22:05:36 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[22:05:36 INF] Information details: 
[22:05:36 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 252.6404ms
[22:05:41 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/register application/json 50
[22:05:41 INF] CORS policy execution successful.
[22:05:41 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation)'
[22:05:41 INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Register(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[22:05:41 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[22:05:41 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 57.8269ms.
[22:05:41 INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
[22:05:41 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation) in 193.8067ms
[22:05:41 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation)'
[22:05:41 INF] Information details: Register -> Login (username:string,password:string)=>
RegisterHandler -> Handle
[22:05:41 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/register application/json 50 - 400 - text/plain;+charset=utf-8 362.3735ms
[22:05:58 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/register application/json 55
[22:05:58 INF] CORS policy execution successful.
[22:05:58 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation)'
[22:05:58 INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Register(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[22:05:58 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[22:05:58 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1.9089ms.
[22:05:58 INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
[22:05:58 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation) in 27.6366ms
[22:05:58 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation)'
[22:05:58 INF] Information details: Register -> Login (username:strinasdsag,password:string)=>
RegisterHandler -> Handle
[22:05:58 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/register application/json 55 - 400 - text/plain;+charset=utf-8 42.2198ms
[22:06:08 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/register application/json 62
[22:06:08 INF] CORS policy execution successful.
[22:06:08 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation)'
[22:06:08 INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Register(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[22:06:08 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[22:06:09 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 403.2482ms.
[22:06:09 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthDto'.
[22:06:09 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation) in 430.2451ms
[22:06:09 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation)'
[22:06:09 INF] Information details: Register -> Login (username:strinasdsag,password:string!@#a12D)=>
RegisterHandler -> Handle=>
ArticleRepository -> GetByUsername=>
ArticleRepository -> Add=>
TokenService -> CreateToken
[22:06:09 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/register application/json 62 - 200 - application/json;+charset=utf-8 441.8657ms
[22:06:18 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/2 - -
[22:06:18 INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
[22:06:18 INF] AuthenticationScheme: Bearer was challenged.
[22:06:18 INF] Information details: 
[22:06:18 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/2 - - - 401 0 - 14.5147ms
[22:09:09 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[22:09:09 INF] Now listening on: https://localhost:7111
[22:09:09 INF] Now listening on: http://localhost:5111
[22:09:09 INF] Application started. Press Ctrl+C to shut down.
[22:09:09 INF] Hosting environment: Development
[22:09:09 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[22:09:13 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[22:09:13 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/swagger-ui.css - -
[22:09:13 INF] Information details: 
[22:09:13 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[22:09:14 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[22:09:14 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 857.3616ms
[22:09:14 INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
[22:09:14 INF] Information details: 
[22:09:14 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/swagger-ui.css - - - 0 143943 text/css 419.0021ms
[22:09:14 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 455.9552ms
[22:09:14 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[22:09:14 INF] Information details: 
[22:09:14 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 198.6124ms
[22:17:36 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[22:17:36 INF] Now listening on: https://localhost:7111
[22:17:36 INF] Now listening on: http://localhost:5111
[22:17:36 INF] Application started. Press Ctrl+C to shut down.
[22:17:36 INF] Hosting environment: Development
[22:17:36 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[22:17:41 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[22:17:41 INF] Information details: 
[22:17:41 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[22:17:41 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 364.7030ms
[22:17:41 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[22:17:42 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - -
[22:17:42 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 254.3544ms
[22:17:42 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[22:17:42 INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
[22:17:42 INF] Information details: 
[22:17:42 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - - - 0 628 image/png 243.1783ms
[22:17:42 INF] Information details: 
[22:17:42 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 208.0363ms
[22:18:09 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74
[22:18:09 INF] CORS policy execution successful.
[22:18:09 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[22:18:09 INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Login(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[22:18:10 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[22:18:10 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 472.7336ms.
[22:18:10 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthDto'.
[22:18:10 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) in 621.5845ms
[22:18:10 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[22:18:10 INF] Information details: AuthController -> Login (username:acc-test-three@gmail.com)=>
LoginHandler -> Handle=>
ArticleRepository -> GetByUsername=>
TokenService -> CreateToken
[22:18:10 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74 - 200 - application/json;+charset=utf-8 813.0790ms
[22:18:30 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=123 - -
[22:18:30 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[22:18:30 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[22:18:30 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[22:18:30 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 258.8317ms.
[22:18:30 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[22:18:30 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 317.693ms
[22:18:30 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[22:18:30 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:123)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
OrderRepository -> ExistForArticle
[22:18:30 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=123 - - - 200 - application/json;+charset=utf-8 404.2859ms
[22:18:36 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - -
[22:18:36 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[22:18:36 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[22:18:36 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[22:18:36 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.9068ms.
[22:18:36 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Order.OrderDto'.
[22:18:36 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 45.9199ms
[22:18:36 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[22:18:36 INF] Information details: ArticleController -> Buy (id:1,customerId)=>
BuyArticleCommand -> Handle=>
ArticleRepository -> Exists=>
ArticleRepository -> Get=>
OrderRepository -> ExistForArticle=>
ArticleRepository -> Get=>
OrderRepository -> Add
[22:18:36 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - - - 200 - application/json;+charset=utf-8 63.7759ms
[22:18:40 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=123 - -
[22:18:40 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[22:18:40 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[22:18:40 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[22:18:40 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 4.7738ms.
[22:18:40 INF] Executing ObjectResult, writing value of type 'System.String'.
[22:18:40 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 28.1617ms
[22:18:40 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[22:18:40 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:123)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
OrderRepository -> ExistForArticle
[22:18:40 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=123 - - - 302 - text/plain;+charset=utf-8 40.1727ms
[22:19:14 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=1 - -
[22:19:14 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[22:19:14 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[22:19:14 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[22:19:14 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[22:19:14 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[22:19:14 INF] Received HTTP response headers after 379.1135ms - 200
[22:19:14 INF] End processing HTTP request after 386.8878ms - 200
[22:19:14 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1
[22:19:14 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1
[22:19:15 INF] Received HTTP response headers after 226.8331ms - 200
[22:19:15 INF] End processing HTTP request after 232.4351ms - 200
[22:19:15 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[22:19:15 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[22:19:15 INF] Received HTTP response headers after 126.7973ms - 200
[22:19:15 INF] End processing HTTP request after 131.2571ms - 200
[22:19:15 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1
[22:19:15 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1
[22:19:15 INF] Received HTTP response headers after 100.0376ms - 200
[22:19:15 INF] End processing HTTP request after 103.1054ms - 200
[22:19:29 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 14784.8822ms.
[22:19:29 INF] Executing ObjectResult, writing value of type 'System.String'.
[22:19:29 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 14808.2486ms
[22:19:29 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[22:19:29 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:1)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:1,vendorHttpClientName:vendor1)=>
VendorRepository -> GetArticle (id:1,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:1,vendorHttpClientName:vendor2)=>
VendorRepository -> GetArticle (id:1,vendorHttpClientName:vendor2)=>
VendorGrpcRepository -> IsArticleExist (id:1)=>
VendorGrpcRepository -> GetArticle (id:1)
[22:19:29 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=1 - - - 302 - text/plain;+charset=utf-8 14819.9142ms
[22:51:09 WRN] No store type was specified for the decimal property 'Price' on entity type 'Article'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[22:51:09 WRN] No store type was specified for the decimal property 'Price' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[22:51:09 WRN] No store type was specified for the decimal property 'Price' on entity type 'Article'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[22:51:09 WRN] No store type was specified for the decimal property 'Price' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[22:51:46 WRN] No store type was specified for the decimal property 'Price' on entity type 'Article'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[22:51:46 WRN] No store type was specified for the decimal property 'Price' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[22:51:47 WRN] No store type was specified for the decimal property 'Price' on entity type 'Article'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[22:51:47 WRN] No store type was specified for the decimal property 'Price' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[22:51:47 INF] Executed DbCommand (182ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [TheShop-Enigmatry-Copy];
[22:51:47 INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [TheShop-Enigmatry-Copy] SET READ_COMMITTED_SNAPSHOT ON;
END;
[22:51:47 INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
[22:51:47 INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
[22:51:47 INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
[22:51:47 INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
[22:51:47 INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
[22:51:47 INF] Applying migration '20230410205109_AddInitialDbContent'.
[22:51:47 INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Articles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Price] decimal(18,2) NOT NULL,
    CONSTRAINT [PK_Articles] PRIMARY KEY ([Id])
);
[22:51:47 INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Customers] (
    [Id] int NOT NULL IDENTITY,
    [Username] nvarchar(max) NOT NULL,
    [Password] nvarchar(max) NOT NULL,
    [Role] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Customers] PRIMARY KEY ([Id])
);
[22:51:47 INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Orders] (
    [Id] int NOT NULL IDENTITY,
    [CustomerId] int NOT NULL,
    [ArticleId] int NOT NULL,
    [Date] datetime2 NULL,
    [Price] decimal(18,2) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Orders] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Orders_Articles_ArticleId] FOREIGN KEY ([ArticleId]) REFERENCES [Articles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Orders_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([Id]) ON DELETE CASCADE
);
[22:51:47 INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Orders_ArticleId] ON [Orders] ([ArticleId]);
[22:51:47 INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Orders_CustomerId] ON [Orders] ([CustomerId]);
[22:51:47 INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230410205109_AddInitialDbContent', N'7.0.4');
[22:57:49 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[22:57:49 INF] Now listening on: https://localhost:7111
[22:57:49 INF] Now listening on: http://localhost:5111
[22:57:49 INF] Application started. Press Ctrl+C to shut down.
[22:57:49 INF] Hosting environment: Development
[22:57:49 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[22:57:50 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[22:57:51 INF] Information details: 
[22:57:51 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[22:57:51 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 345.3468ms
[22:57:51 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/swagger-ui.css - -
[22:57:51 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[22:57:51 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - -
[22:57:51 INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
[22:57:51 INF] Information details: 
[22:57:51 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/swagger-ui.css - - - 0 143943 text/css 454.5510ms
[22:57:51 INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
[22:57:51 INF] Information details: 
[22:57:51 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - - - 0 628 image/png 210.2945ms
[22:57:51 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 564.9987ms
[22:57:51 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[22:57:52 INF] Information details: 
[22:57:52 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 178.6771ms
[22:58:07 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74
[22:58:07 INF] CORS policy execution successful.
[22:58:07 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[22:58:07 INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Login(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[22:58:07 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[22:58:09 WRN] No store type was specified for the decimal property 'Price' on entity type 'Article'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[22:58:09 WRN] No store type was specified for the decimal property 'Price' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[22:58:10 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) in 2759.1437ms
[22:58:10 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[22:58:10 ERR] Error details: Unknown error
[22:58:10 INF] Information details: AuthController -> Login (username:acc-test-three@gmail.com)=>
LoginHandler -> Handle
[22:58:10 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74 - 500 - application/json 3344.0939ms
[22:59:06 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[22:59:07 INF] Now listening on: https://localhost:7111
[22:59:07 INF] Now listening on: http://localhost:5111
[22:59:07 INF] Application started. Press Ctrl+C to shut down.
[22:59:07 INF] Hosting environment: Development
[22:59:07 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[22:59:08 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[22:59:08 INF] Information details: 
[22:59:08 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[22:59:08 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[22:59:08 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 584.4305ms
[22:59:08 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - -
[22:59:08 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 309.9412ms
[22:59:09 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[22:59:09 INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
[22:59:09 INF] Information details: 
[22:59:09 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - - - 0 628 image/png 247.0697ms
[22:59:09 INF] Information details: 
[22:59:09 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 320.0020ms
[22:59:19 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74
[22:59:19 INF] CORS policy execution successful.
[22:59:19 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[22:59:19 INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Login(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[22:59:19 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[22:59:20 WRN] No store type was specified for the decimal property 'Price' on entity type 'Article'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[22:59:20 WRN] No store type was specified for the decimal property 'Price' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[22:59:22 INF] Executed DbCommand (96ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Username] = @__username_0
[22:59:22 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2586.8493ms.
[22:59:22 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthDto'.
[22:59:22 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) in 2714.4088ms
[22:59:22 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[22:59:22 INF] Information details: AuthController -> Login (username:acc-test-three@gmail.com)=>
LoginHandler -> Handle=>
TokenService -> CreateToken
[22:59:22 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74 - 200 - application/json;+charset=utf-8 2876.9353ms
[23:01:43 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[23:01:44 INF] Now listening on: https://localhost:7111
[23:01:44 INF] Now listening on: http://localhost:5111
[23:01:44 INF] Application started. Press Ctrl+C to shut down.
[23:01:44 INF] Hosting environment: Development
[23:01:44 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[23:01:45 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[23:01:46 INF] Information details: 
[23:01:46 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[23:01:46 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 437.7863ms
[23:01:46 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/swagger-ui.css - -
[23:01:46 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[23:01:46 INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
[23:01:46 INF] Information details: 
[23:01:46 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/swagger-ui.css - - - 0 143943 text/css 283.6502ms
[23:01:46 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 311.3597ms
[23:01:46 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - -
[23:01:46 INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
[23:01:46 INF] Information details: 
[23:01:46 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - - - 0 628 image/png 182.6507ms
[23:01:46 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[23:01:47 INF] Information details: 
[23:01:47 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 222.1349ms
[23:02:07 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74
[23:02:07 INF] CORS policy execution successful.
[23:02:07 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[23:02:07 INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Login(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[23:02:07 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:02:08 WRN] No store type was specified for the decimal property 'Price' on entity type 'Article'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[23:02:08 WRN] No store type was specified for the decimal property 'Price' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[23:02:09 INF] Executed DbCommand (61ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Username] = @__username_0
[23:02:09 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2163.4129ms.
[23:02:09 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthDto'.
[23:02:09 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) in 2313.5856ms
[23:02:09 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[23:02:09 INF] Information details: AuthController -> Login (username:acc-test-three@gmail.com)=>
LoginHandler -> Handle=>
TokenService -> CreateToken
[23:02:09 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74 - 200 - application/json;+charset=utf-8 2475.1136ms
[23:02:27 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/register application/json 52
[23:02:27 INF] CORS policy execution successful.
[23:02:27 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation)'
[23:02:27 INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Register(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[23:02:27 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:02:27 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 46.9525ms.
[23:02:27 INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
[23:02:27 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation) in 77.4009ms
[23:02:27 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation)'
[23:02:27 INF] Information details: Register -> Login (username:xzv,password:Pasword123.)=>
RegisterHandler -> Handle
[23:02:27 ERR] Connection id "0HMPQ0R5DI167", Request id "0HMPQ0R5DI167:0000001B": An unhandled exception was thrown by the application.
System.NotImplementedException: The method or operation is not implemented.
   at Homework.Enigmatry.Persistence.Shared.Repositories.DbRepositories.UnitOfWork.Dispose() in C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.Persistence\Repositories\DbRepositories\UnitOfWork.cs:line 29
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.DisposeAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.Features.RequestServicesFeature.<DisposeAsync>g__Awaited|9_0(RequestServicesFeature servicesFeature, ValueTask vt)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.<FireOnCompleted>g__ProcessEvents|242_0(HttpProtocol protocol, Stack`1 events)
[23:02:28 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/register application/json 52 - 400 - text/plain;+charset=utf-8 244.4890ms
[23:02:34 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/register application/json 58
[23:02:34 INF] CORS policy execution successful.
[23:02:34 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation)'
[23:02:34 INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Register(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[23:02:34 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:02:34 INF] Executed DbCommand (6ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Username] = @__username_0
[23:02:34 INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Customers] ([Password], [Role], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
[23:02:34 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 303.8528ms.
[23:02:34 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthDto'.
[23:02:34 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation) in 329.8165ms
[23:02:34 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Register (Homework.Enigmatry.Shop.Presentation)'
[23:02:34 INF] Information details: Register -> Login (username:xz123213v,password:Pasword123.)=>
RegisterHandler -> Handle=>
UnitOfWork -> Save=>
TokenService -> CreateToken
[23:02:35 ERR] Connection id "0HMPQ0R5DI167", Request id "0HMPQ0R5DI167:0000001D": An unhandled exception was thrown by the application.
System.NotImplementedException: The method or operation is not implemented.
   at Homework.Enigmatry.Persistence.Shared.Repositories.DbRepositories.UnitOfWork.Dispose() in C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.Persistence\Repositories\DbRepositories\UnitOfWork.cs:line 29
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.DisposeAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.Features.RequestServicesFeature.<DisposeAsync>g__Awaited|9_0(RequestServicesFeature servicesFeature, ValueTask vt)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.<FireOnCompleted>g__ProcessEvents|242_0(HttpProtocol protocol, Stack`1 events)
[23:02:35 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/register application/json 58 - 200 - application/json;+charset=utf-8 762.6349ms
[23:02:44 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 58
[23:02:44 INF] CORS policy execution successful.
[23:02:44 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[23:02:44 INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Login(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[23:02:44 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:02:44 INF] Executed DbCommand (2ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Username] = @__username_0
[23:02:44 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 215.2867ms.
[23:02:44 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthDto'.
[23:02:44 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) in 250.1382ms
[23:02:44 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[23:02:44 INF] Information details: AuthController -> Login (username:xz123213v)=>
LoginHandler -> Handle=>
TokenService -> CreateToken
[23:02:44 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 58 - 200 - application/json;+charset=utf-8 262.9647ms
[23:07:36 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[23:07:36 INF] Now listening on: https://localhost:7111
[23:07:36 INF] Now listening on: http://localhost:5111
[23:07:36 INF] Application started. Press Ctrl+C to shut down.
[23:07:36 INF] Hosting environment: Development
[23:07:36 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[23:07:40 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[23:07:41 INF] Information details: 
[23:07:41 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[23:07:41 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 759.1389ms
[23:07:41 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/swagger-ui.css - -
[23:07:41 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[23:07:41 INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
[23:07:41 INF] Information details: 
[23:07:41 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/swagger-ui.css - - - 0 143943 text/css 318.6413ms
[23:07:41 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 445.3171ms
[23:07:41 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - -
[23:07:41 INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
[23:07:41 INF] Information details: 
[23:07:41 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - - - 0 628 image/png 199.1627ms
[23:07:41 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[23:07:42 INF] Information details: 
[23:07:42 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 260.7790ms
[23:08:19 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74
[23:08:19 INF] CORS policy execution successful.
[23:08:19 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[23:08:19 INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Login(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[23:08:19 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:08:20 WRN] No store type was specified for the decimal property 'Price' on entity type 'Article'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[23:08:20 WRN] No store type was specified for the decimal property 'Price' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[23:08:21 INF] Executed DbCommand (78ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Username] = @__username_0
[23:08:22 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2715.7154ms.
[23:08:22 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthDto'.
[23:08:22 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) in 2865.6248ms
[23:08:22 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[23:08:22 INF] Information details: AuthController -> Login (username:acc-test-three@gmail.com)=>
LoginHandler -> Handle=>
TokenService -> CreateToken
[23:08:22 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74 - 200 - application/json;+charset=utf-8 3049.5743ms
[23:08:43 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=35 - -
[23:08:43 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:08:43 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:08:43 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:08:43 INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Name], [a].[Price]
FROM [Articles] AS [a]
WHERE [a].[Id] = @__id_0
[23:08:44 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 1732.2517ms
[23:08:45 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:08:46 ERR] Error details: Unknown error
[23:08:46 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:35)=>
GetArticleOfferByIdHandler -> Handle
[23:08:46 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=35 - - - 500 - application/json 2980.7679ms
[23:08:58 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=35 - -
[23:08:58 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:08:58 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:08:58 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:08:58 INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Name], [a].[Price]
FROM [Articles] AS [a]
WHERE [a].[Id] = @__id_0
[23:08:59 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 1447.4692ms
[23:08:59 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:09:00 ERR] Error details: Unknown error
[23:09:00 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:35)=>
GetArticleOfferByIdHandler -> Handle
[23:09:00 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=35 - - - 500 - application/json 2491.3859ms
[23:09:10 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=35 - -
[23:09:10 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:09:10 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:09:10 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:09:10 INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Name], [a].[Price]
FROM [Articles] AS [a]
WHERE [a].[Id] = @__id_0
[23:09:11 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 1274.8683ms
[23:09:11 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:09:12 ERR] Error details: Unknown error
[23:09:12 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:35)=>
GetArticleOfferByIdHandler -> Handle
[23:09:12 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=35 - - - 500 - application/json 2506.3752ms
[23:10:18 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[23:10:19 INF] Now listening on: https://localhost:7111
[23:10:19 INF] Now listening on: http://localhost:5111
[23:10:19 INF] Application started. Press Ctrl+C to shut down.
[23:10:19 INF] Hosting environment: Development
[23:10:19 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[23:10:20 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[23:10:20 INF] Information details: 
[23:10:20 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[23:10:20 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 448.2653ms
[23:10:20 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[23:10:20 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 216.9561ms
[23:10:21 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[23:10:21 INF] Information details: 
[23:10:21 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 235.2880ms
[23:10:34 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74
[23:10:34 INF] CORS policy execution successful.
[23:10:34 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[23:10:34 INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Login(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[23:10:34 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:10:35 WRN] No store type was specified for the decimal property 'Price' on entity type 'Article'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[23:10:35 WRN] No store type was specified for the decimal property 'Price' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[23:10:36 INF] Executed DbCommand (63ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Username] = @__username_0
[23:10:37 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2186.2265ms.
[23:10:37 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthDto'.
[23:10:37 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) in 2321.7785ms
[23:10:37 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[23:10:37 INF] Information details: AuthController -> Login (username:acc-test-three@gmail.com)=>
LoginHandler -> Handle=>
TokenService -> CreateToken
[23:10:37 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74 - 200 - application/json;+charset=utf-8 2501.8501ms
[23:10:57 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=35 - -
[23:10:57 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:10:57 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:10:57 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:10:57 INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Name], [a].[Price]
FROM [Articles] AS [a]
WHERE [a].[Id] = @__id_0
[23:10:57 INF] Executed DbCommand (3ms) [Parameters=[@__articleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]
        WHERE [o].[ArticleId] = @__articleId_0 AND [o].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:10:57 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 328.2817ms.
[23:10:57 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[23:10:57 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 379.8862ms
[23:10:57 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:10:57 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:35)=>
GetArticleOfferByIdHandler -> Handle
[23:10:57 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=35 - - - 200 - application/json;+charset=utf-8 459.8901ms
[23:11:07 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - -
[23:11:07 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:11:07 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:11:07 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:11:07 INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]
        WHERE [c].[Id] = @__id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:11:08 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 1671.5724ms
[23:11:08 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:11:09 ERR] Error details: Unknown error
[23:11:09 INF] Information details: ArticleController -> Buy (id:1,customerId)=>
BuyArticleCommand -> Handle
[23:11:10 ERR] Connection id "0HMPQ0VULV6TR", Request id "0HMPQ0VULV6TR:00000019": An unhandled exception was thrown by the application.
System.NotImplementedException: The method or operation is not implemented.
   at Homework.Enigmatry.Persistence.Shared.Repositories.DbRepositories.UnitOfWork.Dispose() in C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.Persistence\Repositories\DbRepositories\UnitOfWork.cs:line 29
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.DisposeAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.Features.RequestServicesFeature.<DisposeAsync>g__Awaited|9_0(RequestServicesFeature servicesFeature, ValueTask vt)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.<FireOnCompleted>g__ProcessEvents|242_0(HttpProtocol protocol, Stack`1 events)
[23:11:10 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - - - 500 - application/json 3059.0704ms
[23:11:31 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - -
[23:11:31 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:11:31 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:11:31 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:12:59 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[23:13:00 INF] Now listening on: https://localhost:7111
[23:13:00 INF] Now listening on: http://localhost:5111
[23:13:00 INF] Application started. Press Ctrl+C to shut down.
[23:13:00 INF] Hosting environment: Development
[23:13:00 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[23:13:01 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[23:13:02 INF] Information details: 
[23:13:02 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[23:13:02 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[23:13:02 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 526.1960ms
[23:13:02 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 117.6964ms
[23:13:02 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[23:13:02 INF] Information details: 
[23:13:02 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 260.1388ms
[23:13:20 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74
[23:13:20 INF] CORS policy execution successful.
[23:13:20 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[23:13:20 INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Login(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[23:13:20 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:13:21 WRN] No store type was specified for the decimal property 'Price' on entity type 'Article'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[23:13:21 WRN] No store type was specified for the decimal property 'Price' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[23:13:22 INF] Executed DbCommand (53ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Username] = @__username_0
[23:13:22 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2045.9719ms.
[23:13:22 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthDto'.
[23:13:22 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) in 2203.7631ms
[23:13:22 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[23:13:22 INF] Information details: AuthController -> Login (username:acc-test-three@gmail.com)=>
LoginHandler -> Handle=>
TokenService -> CreateToken
[23:13:22 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74 - 200 - application/json;+charset=utf-8 2382.0743ms
[23:13:43 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=32 - -
[23:13:43 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:13:43 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:13:43 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:13:44 INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Name], [a].[Price]
FROM [Articles] AS [a]
WHERE [a].[Id] = @__id_0
[23:13:44 INF] Executed DbCommand (3ms) [Parameters=[@__articleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]
        WHERE [o].[ArticleId] = @__articleId_0 AND [o].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:13:44 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 378.4889ms.
[23:13:44 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[23:13:44 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 435.5085ms
[23:13:44 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:13:44 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:32)=>
GetArticleOfferByIdHandler -> Handle
[23:13:44 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=32 - - - 200 - application/json;+charset=utf-8 508.2266ms
[23:13:50 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - -
[23:13:50 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:13:50 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:13:50 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:13:54 INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]
        WHERE [c].[Id] = @__id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:13:54 INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__id_0
[23:13:56 INF] Executed DbCommand (2ms) [Parameters=[@__articleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]
        WHERE [o].[ArticleId] = @__articleId_0 AND [o].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:13:57 INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__id_0
[23:13:57 ERR] Failed executing DbCommand (146ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Boolean), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [Name], [Price])
VALUES (@p0, @p1, @p2);
INSERT INTO [Orders] ([ArticleId], [CustomerId], [Date], [IsDeleted], [Price])
OUTPUT INSERTED.[Id]
VALUES (@p3, @p4, @p5, @p6, @p7);
[23:13:58 ERR] An exception occurred in the database while saving changes for context type 'Homework.Enigmatry.Persistence.Shared.ShopDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Articles' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__208_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:db7b4d64-156e-44af-8313-babc3df09d78
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Articles' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__208_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:db7b4d64-156e-44af-8313-babc3df09d78
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[23:14:00 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 9837.9126ms
[23:14:01 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:14:01 ERR] Error details: Unknown error
[23:14:01 INF] Information details: ArticleController -> Buy (id:1,customerId)=>
BuyArticleCommand -> Handle=>
UnitOfWork -> Save
[23:14:02 ERR] Connection id "0HMPQ11EL0V6K", Request id "0HMPQ11EL0V6K:00000019": An unhandled exception was thrown by the application.
System.NotImplementedException: The method or operation is not implemented.
   at Homework.Enigmatry.Persistence.Shared.Repositories.DbRepositories.UnitOfWork.Dispose() in C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.Persistence\Repositories\DbRepositories\UnitOfWork.cs:line 29
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.DisposeAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.Features.RequestServicesFeature.<DisposeAsync>g__Awaited|9_0(RequestServicesFeature servicesFeature, ValueTask vt)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.<FireOnCompleted>g__ProcessEvents|242_0(HttpProtocol protocol, Stack`1 events)
[23:14:02 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - - - 500 - application/json 11418.9954ms
[23:15:22 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[23:15:23 INF] Now listening on: https://localhost:7111
[23:15:23 INF] Now listening on: http://localhost:5111
[23:15:23 INF] Application started. Press Ctrl+C to shut down.
[23:15:23 INF] Hosting environment: Development
[23:15:23 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[23:15:24 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[23:15:25 INF] Information details: 
[23:15:25 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[23:15:25 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 797.9051ms
[23:15:25 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[23:15:25 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 301.4308ms
[23:15:26 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[23:15:26 INF] Information details: 
[23:15:26 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 294.6159ms
[23:15:44 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74
[23:15:44 INF] CORS policy execution successful.
[23:15:44 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[23:15:44 INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Login(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[23:15:44 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:15:45 WRN] No store type was specified for the decimal property 'Price' on entity type 'Article'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[23:15:45 WRN] No store type was specified for the decimal property 'Price' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[23:15:45 INF] Executed DbCommand (64ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Username] = @__username_0
[23:15:46 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2162.9465ms.
[23:15:46 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthDto'.
[23:15:46 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) in 2327.7457ms
[23:15:46 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[23:15:46 INF] Information details: AuthController -> Login (username:acc-test-three@gmail.com)=>
LoginHandler -> Handle=>
TokenService -> CreateToken
[23:15:46 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74 - 200 - application/json;+charset=utf-8 2557.6322ms
[23:16:02 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=32 - -
[23:16:02 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:16:02 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:16:02 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:16:03 INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Name], [a].[Price]
FROM [Articles] AS [a]
WHERE [a].[Id] = @__id_0
[23:16:03 INF] Executed DbCommand (2ms) [Parameters=[@__articleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]
        WHERE [o].[ArticleId] = @__articleId_0 AND [o].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:16:03 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 342.4194ms.
[23:16:03 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[23:16:03 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 392.7738ms
[23:16:03 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:16:03 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:32)=>
GetArticleOfferByIdHandler -> Handle
[23:16:03 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=32 - - - 200 - application/json;+charset=utf-8 469.7041ms
[23:16:08 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - -
[23:16:08 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:16:08 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:16:08 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:16:08 INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]
        WHERE [c].[Id] = @__id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:16:08 INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__id_0
[23:16:11 INF] Executed DbCommand (2ms) [Parameters=[@__articleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]
        WHERE [o].[ArticleId] = @__articleId_0 AND [o].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:16:12 INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__id_0
[23:16:13 ERR] Failed executing DbCommand (177ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Boolean), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [Name], [Price])
VALUES (@p0, @p1, @p2);
INSERT INTO [Orders] ([ArticleId], [CustomerId], [Date], [IsDeleted], [Price])
OUTPUT INSERTED.[Id]
VALUES (@p3, @p4, @p5, @p6, @p7);
[23:16:13 ERR] An exception occurred in the database while saving changes for context type 'Homework.Enigmatry.Persistence.Shared.ShopDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Articles' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__208_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:45e9f211-3bdc-4a78-b16e-436e2fb6d528
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Articles' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__208_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:45e9f211-3bdc-4a78-b16e-436e2fb6d528
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[23:16:16 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 7522.6319ms
[23:16:16 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:16:17 ERR] Error details: Unknown error
[23:16:17 INF] Information details: ArticleController -> Buy (id:1,customerId)=>
BuyArticleCommand -> Handle=>
UnitOfWork -> Save
[23:16:17 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - - - 500 - application/json 9018.0700ms
[23:19:10 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[23:19:11 INF] Now listening on: https://localhost:7111
[23:19:11 INF] Now listening on: http://localhost:5111
[23:19:11 INF] Application started. Press Ctrl+C to shut down.
[23:19:11 INF] Hosting environment: Development
[23:19:11 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[23:19:12 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[23:19:13 INF] Information details: 
[23:19:13 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[23:19:13 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[23:19:13 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 735.7714ms
[23:19:13 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - -
[23:19:13 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 416.9904ms
[23:19:14 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[23:19:14 INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
[23:19:14 INF] Information details: 
[23:19:14 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - - - 0 628 image/png 418.5791ms
[23:19:14 INF] Information details: 
[23:19:14 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 480.2904ms
[23:19:27 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74
[23:19:27 INF] CORS policy execution successful.
[23:19:27 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[23:19:27 INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Login(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[23:19:27 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:19:28 WRN] No store type was specified for the decimal property 'Price' on entity type 'Article'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[23:19:28 WRN] No store type was specified for the decimal property 'Price' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[23:19:30 INF] Executed DbCommand (91ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Username] = @__username_0
[23:19:31 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3843.193ms.
[23:19:31 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthDto'.
[23:19:31 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) in 3985.9358ms
[23:19:31 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[23:19:31 INF] Information details: AuthController -> Login (username:acc-test-three@gmail.com)=>
LoginHandler -> Handle=>
TokenService -> CreateToken
[23:19:31 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74 - 200 - application/json;+charset=utf-8 4180.1334ms
[23:19:49 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=123 - -
[23:19:49 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:19:49 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:19:49 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:19:50 INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Name], [a].[Price]
FROM [Articles] AS [a]
WHERE [a].[Id] = @__id_0
[23:19:50 INF] Executed DbCommand (3ms) [Parameters=[@__articleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]
        WHERE [o].[ArticleId] = @__articleId_0 AND [o].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:19:50 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 434.442ms.
[23:19:50 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[23:19:50 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 490.2243ms
[23:19:50 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:19:50 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:123)=>
GetArticleOfferByIdHandler -> Handle
[23:19:50 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=123 - - - 200 - application/json;+charset=utf-8 574.5036ms
[23:19:57 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - -
[23:19:57 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:19:57 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:19:57 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:19:57 INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]
        WHERE [c].[Id] = @__id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:19:57 INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__id_0
[23:20:00 INF] Executed DbCommand (2ms) [Parameters=[@__articleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]
        WHERE [o].[ArticleId] = @__articleId_0 AND [o].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:20:01 INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__id_0
[23:20:02 ERR] Failed executing DbCommand (207ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Boolean), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [Name], [Price])
VALUES (@p0, @p1, @p2);
INSERT INTO [Orders] ([ArticleId], [CustomerId], [Date], [IsDeleted], [Price])
OUTPUT INSERTED.[Id]
VALUES (@p3, @p4, @p5, @p6, @p7);
[23:20:03 ERR] An exception occurred in the database while saving changes for context type 'Homework.Enigmatry.Persistence.Shared.ShopDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Articles' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__208_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:250bd21a-e5f4-47a3-bbc7-9943b5dfa4e4
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Articles' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__208_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:250bd21a-e5f4-47a3-bbc7-9943b5dfa4e4
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[23:20:03 ERR] Error details: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Articles' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__208_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:250bd21a-e5f4-47a3-bbc7-9943b5dfa4e4
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Homework.Enigmatry.Persistence.Shared.Repositories.DbRepositories.UnitOfWork.Save() in C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.Persistence\Repositories\DbRepositories\UnitOfWork.cs:line 42
[23:20:03 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 6342.7267ms.
[23:20:03 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Order.OrderDto'.
[23:20:03 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 6371.2274ms
[23:20:03 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:20:03 INF] Information details: ArticleController -> Buy (id:1,customerId)=>
BuyArticleCommand -> Handle=>
UnitOfWork -> Save
[23:20:03 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - - - 200 - application/json;+charset=utf-8 6387.9255ms
[23:26:45 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[23:26:46 INF] Now listening on: https://localhost:7111
[23:26:46 INF] Now listening on: http://localhost:5111
[23:26:46 INF] Application started. Press Ctrl+C to shut down.
[23:26:46 INF] Hosting environment: Development
[23:26:46 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[23:26:47 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[23:26:48 INF] Information details: 
[23:26:48 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[23:26:48 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[23:26:48 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 967.8750ms
[23:26:48 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - -
[23:26:48 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 379.0595ms
[23:26:49 INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
[23:26:49 INF] Information details: 
[23:26:49 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - - - 0 628 image/png 481.3210ms
[23:26:49 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[23:26:49 INF] Information details: 
[23:26:49 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 291.5716ms
[23:27:04 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74
[23:27:04 INF] CORS policy execution successful.
[23:27:04 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[23:27:04 INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Login(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[23:27:04 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:27:06 WRN] No store type was specified for the decimal property 'Price' on entity type 'Article'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[23:27:06 WRN] No store type was specified for the decimal property 'Price' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[23:27:07 INF] Executed DbCommand (89ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Username] = @__username_0
[23:27:07 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2947.5617ms.
[23:27:07 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthDto'.
[23:27:07 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) in 3103.0675ms
[23:27:07 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[23:27:07 INF] Information details: AuthController -> Login (username:acc-test-three@gmail.com)=>
LoginHandler -> Handle=>
TokenService -> CreateToken
[23:27:07 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74 - 200 - application/json;+charset=utf-8 3297.3165ms
[23:27:25 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=123 - -
[23:27:25 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:27:25 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:27:25 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:27:25 INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Name], [a].[Price]
FROM [Articles] AS [a]
WHERE [a].[Id] = @__id_0
[23:27:25 INF] Executed DbCommand (2ms) [Parameters=[@__articleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]
        WHERE [o].[ArticleId] = @__articleId_0 AND [o].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:27:25 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 436.3939ms.
[23:27:25 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[23:27:25 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 488.0356ms
[23:27:25 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:27:25 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:123)=>
GetArticleOfferByIdHandler -> Handle
[23:27:25 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=123 - - - 200 - application/json;+charset=utf-8 568.0326ms
[23:27:31 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - -
[23:27:31 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:27:31 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:27:31 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:27:31 INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]
        WHERE [c].[Id] = @__id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:27:31 INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__id_0
[23:27:31 INF] Executed DbCommand (3ms) [Parameters=[@__articleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]
        WHERE [o].[ArticleId] = @__articleId_0 AND [o].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:27:31 INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__id_0
[23:27:32 ERR] Failed executing DbCommand (232ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Boolean), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [Name], [Price])
VALUES (@p0, @p1, @p2);
INSERT INTO [Orders] ([ArticleId], [CustomerId], [Date], [IsDeleted], [Price])
OUTPUT INSERTED.[Id]
VALUES (@p3, @p4, @p5, @p6, @p7);
[23:27:33 ERR] An exception occurred in the database while saving changes for context type 'Homework.Enigmatry.Persistence.Shared.ShopDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Articles' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__208_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:08ab36bd-9d96-46ab-8aa1-66e4970cf705
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Articles' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__208_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:08ab36bd-9d96-46ab-8aa1-66e4970cf705
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[23:27:33 ERR] Error details: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Articles' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__208_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:08ab36bd-9d96-46ab-8aa1-66e4970cf705
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Homework.Enigmatry.Persistence.Shared.Repositories.DbRepositories.UnitOfWork.Save() in C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.Persistence\Repositories\DbRepositories\UnitOfWork.cs:line 42
[23:27:33 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1666.157ms.
[23:27:33 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Order.OrderDto'.
[23:27:33 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 1692.5018ms
[23:27:33 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:27:33 INF] Information details: ArticleController -> Buy (id:1,customerId)=>
BuyArticleCommand -> Handle=>
UnitOfWork -> Save
[23:27:33 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - - - 200 - application/json;+charset=utf-8 1712.4910ms
[23:27:47 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=123 - -
[23:27:47 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:27:47 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:27:47 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:27:47 INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Name], [a].[Price]
FROM [Articles] AS [a]
WHERE [a].[Id] = @__id_0
[23:27:47 INF] Executed DbCommand (2ms) [Parameters=[@__articleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]
        WHERE [o].[ArticleId] = @__articleId_0 AND [o].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:27:47 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 16.348ms.
[23:27:47 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[23:27:47 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 45.8079ms
[23:27:47 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:27:47 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:123)=>
GetArticleOfferByIdHandler -> Handle
[23:27:47 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=123 - - - 200 - application/json;+charset=utf-8 58.5570ms
[23:27:51 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - -
[23:27:51 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:27:51 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:27:51 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:27:51 INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]
        WHERE [c].[Id] = @__id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:27:51 INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__id_0
[23:27:51 INF] Executed DbCommand (4ms) [Parameters=[@__articleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]
        WHERE [o].[ArticleId] = @__articleId_0 AND [o].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:27:51 INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__id_0
[23:27:52 ERR] Failed executing DbCommand (206ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Boolean), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [Name], [Price])
VALUES (@p0, @p1, @p2);
INSERT INTO [Orders] ([ArticleId], [CustomerId], [Date], [IsDeleted], [Price])
OUTPUT INSERTED.[Id]
VALUES (@p3, @p4, @p5, @p6, @p7);
[23:27:52 ERR] An exception occurred in the database while saving changes for context type 'Homework.Enigmatry.Persistence.Shared.ShopDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Articles' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__208_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:08ab36bd-9d96-46ab-8aa1-66e4970cf705
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Articles' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__208_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:08ab36bd-9d96-46ab-8aa1-66e4970cf705
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[23:27:53 ERR] Error details: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Articles' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__208_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:08ab36bd-9d96-46ab-8aa1-66e4970cf705
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Homework.Enigmatry.Persistence.Shared.Repositories.DbRepositories.UnitOfWork.Save() in C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.Persistence\Repositories\DbRepositories\UnitOfWork.cs:line 42
[23:27:53 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1284.0107ms.
[23:27:53 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Order.OrderDto'.
[23:27:53 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 1323.7094ms
[23:27:53 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:27:53 INF] Information details: ArticleController -> Buy (id:1,customerId)=>
BuyArticleCommand -> Handle=>
UnitOfWork -> Save
[23:27:53 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - - - 200 - application/json;+charset=utf-8 1343.1347ms
[23:30:52 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[23:30:52 INF] Now listening on: https://localhost:7111
[23:30:52 INF] Now listening on: http://localhost:5111
[23:30:52 INF] Application started. Press Ctrl+C to shut down.
[23:30:52 INF] Hosting environment: Development
[23:30:52 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[23:30:54 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[23:30:54 INF] Information details: 
[23:30:54 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[23:30:54 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 524.1557ms
[23:30:54 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[23:30:54 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 116.0851ms
[23:30:54 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - -
[23:30:55 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[23:30:55 INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
[23:30:55 INF] Information details: 
[23:30:55 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - - - 0 628 image/png 249.0118ms
[23:30:55 INF] Information details: 
[23:30:55 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 302.1378ms
[23:31:05 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74
[23:31:05 INF] CORS policy execution successful.
[23:31:06 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[23:31:06 INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Login(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[23:31:06 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:31:07 WRN] No store type was specified for the decimal property 'Price' on entity type 'Article'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[23:31:07 WRN] No store type was specified for the decimal property 'Price' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[23:31:08 INF] Executed DbCommand (72ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Username] = @__username_0
[23:31:08 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2349.9343ms.
[23:31:08 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthDto'.
[23:31:08 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) in 2499.3761ms
[23:31:08 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[23:31:08 INF] Information details: AuthController -> Login (username:acc-test-three@gmail.com)=>
LoginHandler -> Handle=>
TokenService -> CreateToken
[23:31:08 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74 - 200 - application/json;+charset=utf-8 2674.9333ms
[23:31:25 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=26 - -
[23:31:25 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:31:25 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:31:25 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:31:25 INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name], [a].[Price]
FROM [Articles] AS [a]
WHERE [a].[Id] = @__id_0
[23:31:26 INF] Executed DbCommand (3ms) [Parameters=[@__articleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]
        WHERE [o].[ArticleId] = @__articleId_0 AND [o].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:31:26 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 428.8919ms.
[23:31:26 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[23:31:26 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 477.9857ms
[23:31:26 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:31:26 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:26)=>
GetArticleOfferByIdHandler -> Handle
[23:31:26 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=26 - - - 200 - application/json;+charset=utf-8 567.3435ms
[23:31:33 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - -
[23:31:33 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:31:33 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:31:33 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:31:33 INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]
        WHERE [c].[Id] = @__id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:31:33 INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__id_0
[23:31:33 INF] Executed DbCommand (3ms) [Parameters=[@__articleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]
        WHERE [o].[ArticleId] = @__articleId_0 AND [o].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:31:33 INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__id_0
[23:31:33 ERR] Failed executing DbCommand (221ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Boolean), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [Name], [Price])
VALUES (@p0, @p1, @p2);
INSERT INTO [Orders] ([ArticleId], [CustomerId], [Date], [IsDeleted], [Price])
OUTPUT INSERTED.[Id]
VALUES (@p3, @p4, @p5, @p6, @p7);
[23:31:34 ERR] An exception occurred in the database while saving changes for context type 'Homework.Enigmatry.Persistence.Shared.ShopDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Articles' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__208_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:9646ca98-941f-4eaf-a59d-657057d7cae6
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Articles' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__208_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:9646ca98-941f-4eaf-a59d-657057d7cae6
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[23:31:35 ERR] Error details: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Articles' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__208_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:9646ca98-941f-4eaf-a59d-657057d7cae6
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Homework.Enigmatry.Persistence.Shared.Repositories.DbRepositories.UnitOfWork.Save() in C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.Persistence\Repositories\DbRepositories\UnitOfWork.cs:line 42
[23:31:35 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1737.4402ms.
[23:31:35 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Order.OrderDto'.
[23:31:35 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 1762.8667ms
[23:31:35 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:31:35 INF] Information details: ArticleController -> Buy (id:1,customerId)=>
BuyArticleCommand -> Handle=>
UnitOfWork -> Save
[23:31:35 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - - - 200 - application/json;+charset=utf-8 1779.7927ms
[23:32:29 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - -
[23:32:29 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:32:29 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:32:29 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:32:29 INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]
        WHERE [c].[Id] = @__id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:32:29 INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__id_0
[23:32:29 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 27.0076ms.
[23:32:29 INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
[23:32:29 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 68.2697ms
[23:32:29 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:32:29 INF] Information details: ArticleController -> Buy (id:1,customerId)=>
BuyArticleCommand -> Handle
[23:32:29 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - - - 400 - text/plain;+charset=utf-8 90.3057ms
[23:32:35 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=26 - -
[23:32:35 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:32:35 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:32:35 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:32:35 INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name], [a].[Price]
FROM [Articles] AS [a]
WHERE [a].[Id] = @__id_0
[23:32:35 INF] Executed DbCommand (3ms) [Parameters=[@__articleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]
        WHERE [o].[ArticleId] = @__articleId_0 AND [o].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:32:35 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.3926ms.
[23:32:35 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[23:32:35 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 58.2843ms
[23:32:35 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:32:35 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:26)=>
GetArticleOfferByIdHandler -> Handle
[23:32:35 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=26 - - - 200 - application/json;+charset=utf-8 70.6190ms
[23:32:39 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - -
[23:32:39 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:32:39 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:32:39 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:32:39 INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]
        WHERE [c].[Id] = @__id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:32:39 INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__id_0
[23:32:39 INF] Executed DbCommand (3ms) [Parameters=[@__articleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]
        WHERE [o].[ArticleId] = @__articleId_0 AND [o].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:32:39 INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__id_0
[23:33:14 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[23:33:14 INF] Now listening on: https://localhost:7111
[23:33:14 INF] Now listening on: http://localhost:5111
[23:33:14 INF] Application started. Press Ctrl+C to shut down.
[23:33:14 INF] Hosting environment: Development
[23:33:14 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[23:33:16 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[23:33:16 INF] Information details: 
[23:33:16 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[23:33:16 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 576.6737ms
[23:33:16 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/swagger-ui.css - -
[23:33:16 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[23:33:17 INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
[23:33:17 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - -
[23:33:17 INF] Information details: 
[23:33:17 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/swagger-ui.css - - - 0 143943 text/css 372.5864ms
[23:33:17 INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
[23:33:17 INF] Information details: 
[23:33:17 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - - - 0 628 image/png 240.8565ms
[23:33:17 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 615.9692ms
[23:33:17 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[23:33:17 INF] Information details: 
[23:33:17 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 304.6434ms
[23:33:39 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=45 - -
[23:33:39 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:33:39 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:33:39 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:33:41 WRN] No store type was specified for the decimal property 'Price' on entity type 'Article'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[23:33:41 WRN] No store type was specified for the decimal property 'Price' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[23:33:42 INF] Executed DbCommand (72ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name], [a].[Price]
FROM [Articles] AS [a]
WHERE [a].[Id] = @__id_0
[23:33:42 INF] Executed DbCommand (7ms) [Parameters=[@__articleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]
        WHERE [o].[ArticleId] = @__articleId_0 AND [o].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:33:42 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2736.9357ms.
[23:33:42 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[23:33:42 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 2928.7062ms
[23:33:42 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:33:42 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:45)=>
GetArticleOfferByIdHandler -> Handle
[23:33:42 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=45 - - - 200 - application/json;+charset=utf-8 3445.2596ms
[23:33:48 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - -
[23:33:48 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:33:48 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:33:48 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:33:48 INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]
        WHERE [c].[Id] = @__id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:33:48 INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__id_0
[23:33:48 INF] Executed DbCommand (2ms) [Parameters=[@__articleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]
        WHERE [o].[ArticleId] = @__articleId_0 AND [o].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:33:48 INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__id_0
[23:33:57 INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name], [a].[Price]
FROM [Articles] AS [a]
WHERE [a].[Id] = @__id_0
[23:34:02 INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([ArticleId], [CustomerId], [Date], [IsDeleted], [Price])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
[23:34:06 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 18365.7937ms.
[23:34:06 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Order.OrderDto'.
[23:34:06 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 18394.2125ms
[23:34:06 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:34:06 INF] Information details: ArticleController -> Buy (id:1,customerId)=>
BuyArticleCommand -> Handle=>
UnitOfWork -> Save
[23:34:06 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - - - 200 - application/json;+charset=utf-8 18419.8948ms
[23:34:24 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=45 - -
[23:34:24 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:34:24 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:34:24 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:34:24 INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name], [a].[Price]
FROM [Articles] AS [a]
WHERE [a].[Id] = @__id_0
[23:34:24 INF] Executed DbCommand (8ms) [Parameters=[@__articleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]
        WHERE [o].[ArticleId] = @__articleId_0 AND [o].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:34:24 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 107.0845ms.
[23:34:24 INF] Executing ObjectResult, writing value of type 'System.String'.
[23:34:24 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 141.4643ms
[23:34:24 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:34:24 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:45)=>
GetArticleOfferByIdHandler -> Handle
[23:34:24 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=45 - - - 302 - text/plain;+charset=utf-8 155.6953ms
[23:34:27 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - -
[23:34:27 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:34:27 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:34:27 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:34:27 INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]
        WHERE [c].[Id] = @__id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:34:27 INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__id_0
[23:34:27 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 18.7946ms.
[23:34:27 INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
[23:34:27 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 42.456ms
[23:34:27 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:34:27 INF] Information details: ArticleController -> Buy (id:1,customerId)=>
BuyArticleCommand -> Handle
[23:34:27 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - - - 400 - text/plain;+charset=utf-8 52.1706ms
[23:34:36 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/23/offers?MaxArticlePrice=45 - -
[23:34:36 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:34:36 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:34:36 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:34:36 INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name], [a].[Price]
FROM [Articles] AS [a]
WHERE [a].[Id] = @__id_0
[23:34:36 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/23/exist
[23:34:36 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/23/exist
[23:34:41 ERR] Error details: No connection could be made because the target machine actively refused it. (localhost:5222)
System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|281_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
[23:34:41 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/23/exist
[23:34:41 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/23/exist
[23:34:46 ERR] Error details: No connection could be made because the target machine actively refused it. (localhost:5222)
System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|281_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
[23:34:50 ERR] Error details: Status(StatusCode="Unavailable", Detail="Error connecting to subchannel.", DebugException="System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|281_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Grpc.Net.Client.Balancer.Internal.SocketConnectivitySubchannelTransport.TryConnectAsync(ConnectContext context)")
[23:34:50 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.NotFoundObjectResult in 14603.338ms.
[23:34:50 INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
[23:34:50 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 14635.8579ms
[23:34:50 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:34:50 INF] Information details: ArticleController -> GetOffers (id:23,maxPrice:45)=>
GetArticleOfferByIdHandler -> Handle=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:23,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:23,vendorHttpClientName:vendor2)=>
VendorGrpcRepository -> IsArticleExist (id:23)
[23:34:50 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/23/offers?MaxArticlePrice=45 - - - 404 - text/plain;+charset=utf-8 14644.9292ms
[23:35:24 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[23:35:25 INF] Now listening on: https://localhost:7111
[23:35:25 INF] Now listening on: http://localhost:5111
[23:35:25 INF] Application started. Press Ctrl+C to shut down.
[23:35:25 INF] Hosting environment: Development
[23:35:25 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[23:35:29 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[23:35:30 INF] Information details: 
[23:35:30 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[23:35:30 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 904.0911ms
[23:35:30 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[23:35:31 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 256.2665ms
[23:35:32 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[23:35:33 INF] Information details: 
[23:35:33 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 314.6906ms
[23:35:56 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/123/offers?MaxArticlePrice=24 - -
[23:35:57 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:35:57 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:35:57 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:35:58 WRN] No store type was specified for the decimal property 'Price' on entity type 'Article'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[23:35:58 WRN] No store type was specified for the decimal property 'Price' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[23:35:59 INF] Executed DbCommand (73ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name], [a].[Price]
FROM [Articles] AS [a]
WHERE [a].[Id] = @__id_0
[23:35:59 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/123/exist
[23:35:59 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/123/exist
[23:36:00 INF] Received HTTP response headers after 608.8236ms - 404
[23:36:00 INF] End processing HTTP request after 624.1731ms - 404
[23:36:00 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/123/exist
[23:36:00 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/123/exist
[23:36:00 INF] Received HTTP response headers after 197.2661ms - 404
[23:36:00 INF] End processing HTTP request after 202.1723ms - 404
[23:36:01 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.NotFoundObjectResult in 3940.5235ms.
[23:36:01 INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
[23:36:01 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 4104.3018ms
[23:36:01 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:36:01 INF] Information details: ArticleController -> GetOffers (id:123,maxPrice:24)=>
GetArticleOfferByIdHandler -> Handle=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:123,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:123,vendorHttpClientName:vendor2)=>
VendorGrpcRepository -> IsArticleExist (id:123)
[23:36:01 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/123/offers?MaxArticlePrice=24 - - - 404 - text/plain;+charset=utf-8 4605.4828ms
[23:36:05 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/123/offers?MaxArticlePrice=24 - -
[23:36:05 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:36:05 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:36:05 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:36:05 INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name], [a].[Price]
FROM [Articles] AS [a]
WHERE [a].[Id] = @__id_0
[23:36:05 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/123/exist
[23:36:05 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/123/exist
[23:36:05 INF] Received HTTP response headers after 120.6777ms - 404
[23:36:05 INF] End processing HTTP request after 124.4553ms - 404
[23:36:05 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/123/exist
[23:36:05 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/123/exist
[23:36:05 INF] Received HTTP response headers after 101.7381ms - 200
[23:36:05 INF] End processing HTTP request after 105.6427ms - 200
[23:36:05 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/123
[23:36:05 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/123
[23:36:06 INF] Received HTTP response headers after 251.1102ms - 200
[23:36:06 INF] End processing HTTP request after 254.7449ms - 200
[23:36:06 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 843.2696ms.
[23:36:06 INF] Executing ObjectResult, writing value of type 'System.String'.
[23:36:06 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 871.2692ms
[23:36:06 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:36:06 INF] Information details: ArticleController -> GetOffers (id:123,maxPrice:24)=>
GetArticleOfferByIdHandler -> Handle=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:123,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:123,vendorHttpClientName:vendor2)=>
VendorRepository -> GetArticle (id:123,vendorHttpClientName:vendor2)=>
VendorGrpcRepository -> IsArticleExist (id:123)=>
VendorGrpcRepository -> GetArticle (id:123)
[23:36:06 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/123/offers?MaxArticlePrice=24 - - - 302 - text/plain;+charset=utf-8 893.0175ms
[23:36:12 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/123/offers?MaxArticlePrice=240 - -
[23:36:12 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:36:12 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:36:12 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:36:12 INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name], [a].[Price]
FROM [Articles] AS [a]
WHERE [a].[Id] = @__id_0
[23:36:12 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/123/exist
[23:36:12 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/123/exist
[23:36:12 INF] Received HTTP response headers after 122.7756ms - 200
[23:36:12 INF] End processing HTTP request after 126.1291ms - 200
[23:36:12 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/123
[23:36:12 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/123
[23:36:13 INF] Received HTTP response headers after 131.4233ms - 200
[23:36:13 INF] End processing HTTP request after 136.0387ms - 200
[23:36:13 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/123/exist
[23:36:13 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/123/exist
[23:36:13 INF] Received HTTP response headers after 113.3002ms - 200
[23:36:13 INF] End processing HTTP request after 116.9125ms - 200
[23:36:13 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/123
[23:36:13 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/123
[23:36:13 INF] Received HTTP response headers after 143.0108ms - 200
[23:36:13 INF] End processing HTTP request after 147.1543ms - 200
[23:36:13 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 725.961ms.
[23:36:13 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[23:36:13 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 755.2456ms
[23:36:13 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:36:13 INF] Information details: ArticleController -> GetOffers (id:123,maxPrice:240)=>
GetArticleOfferByIdHandler -> Handle=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:123,vendorHttpClientName:vendor1)=>
VendorRepository -> GetArticle (id:123,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:123,vendorHttpClientName:vendor2)=>
VendorRepository -> GetArticle (id:123,vendorHttpClientName:vendor2)=>
VendorGrpcRepository -> IsArticleExist (id:123)=>
VendorGrpcRepository -> GetArticle (id:123)
[23:36:13 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/123/offers?MaxArticlePrice=240 - - - 200 - application/json;+charset=utf-8 768.0120ms
[23:36:24 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/123/buy - -
[23:36:24 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:36:24 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:36:24 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:36:24 INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]
        WHERE [c].[Id] = @__id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:36:24 INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__id_0
[23:36:24 INF] Executed DbCommand (2ms) [Parameters=[@__articleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]
        WHERE [o].[ArticleId] = @__articleId_0 AND [o].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:36:24 INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__id_0
[23:36:30 INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name], [a].[Price]
FROM [Articles] AS [a]
WHERE [a].[Id] = @__id_0
[23:36:31 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 7561.1532ms
[23:36:32 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:36:32 ERR] Error details: Internal server error:Its not constructed to support saving of orders with articles which are not at our system!!!
Homework.Enigmatry.Shop.Application.Exceptions.UnavailableAtLocalPersistenceStorageException: Its not constructed to support saving of orders with articles which are not at our system!!!
   at Homework.Enigmatry.Shop.Application.Features.Articles.Handlers.Commands.BuyArticleCommand.Handle(BuyArticleRequest request, CancellationToken cancellationToken) in C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.Application\Features\Articles\Handlers\Commands\BuyArticleCommand.cs:line 65
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy(Int32 id, CancellationToken cancellationToken) in C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.Presentation\Controllers\ArticleController.cs:line 105
   at lambda_method28(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Homework.Enigmatry.Shop.Presentation.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.Presentation\Middleware\ExceptionMiddleware.cs:line 58
[23:36:33 INF] Information details: ArticleController -> Buy (id:123,customerId)=>
BuyArticleCommand -> Handle
[23:36:33 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/123/buy - - - 500 - application/json 8952.0191ms
[23:37:38 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[23:37:39 INF] Now listening on: https://localhost:7111
[23:37:39 INF] Now listening on: http://localhost:5111
[23:37:39 INF] Application started. Press Ctrl+C to shut down.
[23:37:39 INF] Hosting environment: Development
[23:37:39 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[23:37:45 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[23:37:46 INF] Information details: 
[23:37:46 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[23:37:46 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 1386.4335ms
[23:37:46 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[23:37:46 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 171.1777ms
[23:37:47 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[23:37:47 INF] Information details: 
[23:37:47 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 491.4468ms
[23:38:04 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=2 - -
[23:38:05 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:38:05 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:38:05 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:38:05 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[23:38:05 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[23:38:06 INF] Received HTTP response headers after 510.082ms - 200
[23:38:06 INF] End processing HTTP request after 524.1862ms - 200
[23:38:06 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1
[23:38:06 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1
[23:38:06 INF] Received HTTP response headers after 331.584ms - 200
[23:38:06 INF] End processing HTTP request after 336.2628ms - 200
[23:38:06 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[23:38:06 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1/exist
[23:38:06 INF] Received HTTP response headers after 149.6518ms - 200
[23:38:06 INF] End processing HTTP request after 154.684ms - 200
[23:38:06 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1
[23:38:06 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1
[23:38:06 INF] Received HTTP response headers after 157.5638ms - 200
[23:38:06 INF] End processing HTTP request after 161.8556ms - 200
[23:38:07 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 2426.1732ms.
[23:38:07 INF] Executing ObjectResult, writing value of type 'System.String'.
[23:38:07 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 2649.3868ms
[23:38:07 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:38:07 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:2)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:1,vendorHttpClientName:vendor1)=>
VendorRepository -> GetArticle (id:1,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:1,vendorHttpClientName:vendor2)=>
VendorRepository -> GetArticle (id:1,vendorHttpClientName:vendor2)=>
VendorGrpcRepository -> IsArticleExist (id:1)=>
VendorGrpcRepository -> GetArticle (id:1)
[23:38:07 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=2 - - - 302 - text/plain;+charset=utf-8 3150.4270ms
[23:38:13 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=222 - -
[23:38:13 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:38:13 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:38:13 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:38:13 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25.545ms.
[23:38:13 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[23:38:13 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 64.8456ms
[23:38:13 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:38:13 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:222)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
OrderRepository -> ExistForArticle
[23:38:13 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=222 - - - 200 - application/json;+charset=utf-8 80.7800ms
[23:38:22 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - -
[23:38:22 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:38:22 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:38:22 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:38:22 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 33.5152ms.
[23:38:22 INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
[23:38:22 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 64.8816ms
[23:38:22 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:38:22 INF] Information details: ArticleController -> Buy (id:1,customerId)=>
BuyArticleCommand -> Handle=>
ArticleRepository -> Exists=>
ArticleRepository -> Get
[23:38:22 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - - - 400 - text/plain;+charset=utf-8 85.3447ms
[23:38:44 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1 - -
[23:38:44 INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
[23:38:44 INF] AuthenticationScheme: Bearer was forbidden.
[23:38:44 INF] Information details: 
[23:38:44 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1 - - - 403 0 - 10.2544ms
[23:38:57 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74
[23:38:57 INF] CORS policy execution successful.
[23:38:57 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[23:38:57 INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Login(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[23:38:57 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:38:57 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 243.3527ms.
[23:38:57 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthDto'.
[23:38:57 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) in 282.3832ms
[23:38:57 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[23:38:57 INF] Information details: AuthController -> Login (username:acc-test-three@gmail.com)=>
LoginHandler -> Handle=>
ArticleRepository -> GetByUsername=>
TokenService -> CreateToken
[23:38:57 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74 - 200 - application/json;+charset=utf-8 302.3053ms
[23:39:14 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=222 - -
[23:39:14 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:39:14 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:39:14 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:39:14 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 6.3929ms.
[23:39:14 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[23:39:14 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 35.5256ms
[23:39:14 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:39:14 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:222)=>
GetArticleOfferByIdHandler -> Handle
[23:39:14 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=222 - - - 200 - application/json;+charset=utf-8 44.2056ms
[23:39:18 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - -
[23:39:18 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:39:18 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:39:18 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:39:18 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 10.2635ms.
[23:39:18 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Order.OrderDto'.
[23:39:18 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 32.4615ms
[23:39:18 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:39:18 INF] Information details: ArticleController -> Buy (id:1,customerId)=>
BuyArticleCommand -> Handle=>
ArticleRepository -> Exists=>
ArticleRepository -> Get=>
OrderRepository -> ExistForArticle=>
ArticleRepository -> Get=>
ArticleRepository -> Get=>
OrderRepository -> Add=>
UnitOfWork -> Save
[23:39:18 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - - - 200 - application/json;+charset=utf-8 40.4302ms
[23:39:25 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1234/offers?MaxArticlePrice=222 - -
[23:39:25 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:39:25 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:39:25 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:39:25 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1234/exist
[23:39:25 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1234/exist
[23:39:25 INF] Received HTTP response headers after 155.9906ms - 404
[23:39:25 INF] End processing HTTP request after 160.2684ms - 404
[23:39:25 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1234/exist
[23:39:25 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1234/exist
[23:39:25 INF] Received HTTP response headers after 177.0078ms - 404
[23:39:25 INF] End processing HTTP request after 180.8078ms - 404
[23:39:25 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 461.1212ms.
[23:39:25 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[23:39:25 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 492.1966ms
[23:39:25 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:39:25 INF] Information details: ArticleController -> GetOffers (id:1234,maxPrice:222)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:1234,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:1234,vendorHttpClientName:vendor2)=>
VendorGrpcRepository -> IsArticleExist (id:1234)=>
VendorGrpcRepository -> GetArticle (id:1234)
[23:39:25 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1234/offers?MaxArticlePrice=222 - - - 200 - application/json;+charset=utf-8 505.7351ms
[23:39:31 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1234/buy - -
[23:39:31 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:39:31 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:39:31 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:39:32 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 698.9778ms
[23:39:32 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:39:32 ERR] Error details: Internal server error:Its not constructed to support saving of orders with articles (on disc) which are not at our system!!!
Homework.Enigmatry.Shop.Application.Exceptions.UnavailableAtLocalPersistenceStorageException: Its not constructed to support saving of orders with articles (on disc) which are not at our system!!!
   at Homework.Enigmatry.Shop.Application.Features.Articles.Handlers.Commands.BuyArticleCommand.Handle(BuyArticleRequest request, CancellationToken cancellationToken) in C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.Application\Features\Articles\Handlers\Commands\BuyArticleCommand.cs:line 65
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy(Int32 id, CancellationToken cancellationToken) in C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.Presentation\Controllers\ArticleController.cs:line 105
   at lambda_method21(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Homework.Enigmatry.Shop.Presentation.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.Presentation\Middleware\ExceptionMiddleware.cs:line 58
[23:39:32 INF] Information details: ArticleController -> Buy (id:1234,customerId)=>
BuyArticleCommand -> Handle=>
ArticleRepository -> Exists=>
ArticleRepository -> Get=>
OrderRepository -> ExistForArticle=>
ArticleRepository -> Get=>
ArticleRepository -> Get
[23:39:32 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1234/buy - - - 500 - application/json 1192.1808ms
[23:40:08 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[23:40:08 INF] Now listening on: https://localhost:7111
[23:40:08 INF] Now listening on: http://localhost:5111
[23:40:08 INF] Application started. Press Ctrl+C to shut down.
[23:40:08 INF] Hosting environment: Development
[23:40:08 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[23:40:15 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[23:40:16 INF] Information details: 
[23:40:16 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[23:40:16 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[23:40:16 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 989.0627ms
[23:40:16 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 196.3946ms
[23:40:16 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[23:40:17 INF] Information details: 
[23:40:17 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 419.2297ms
[23:40:31 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1234/offers?MaxArticlePrice=256 - -
[23:40:32 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:40:32 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:40:32 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:40:32 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1234/exist
[23:40:32 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1234/exist
[23:40:33 INF] Received HTTP response headers after 495.7421ms - 200
[23:40:33 INF] End processing HTTP request after 510.434ms - 200
[23:40:33 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1234
[23:40:33 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1234
[23:40:33 INF] Received HTTP response headers after 368.894ms - 200
[23:40:33 INF] End processing HTTP request after 374.8253ms - 200
[23:40:33 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1234/exist
[23:40:33 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1234/exist
[23:40:33 INF] Received HTTP response headers after 256.8062ms - 200
[23:40:33 INF] End processing HTTP request after 262.5649ms - 200
[23:40:33 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/1234
[23:40:33 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/1234
[23:40:33 INF] Received HTTP response headers after 147.8784ms - 200
[23:40:33 INF] End processing HTTP request after 152.6113ms - 200
[23:40:34 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2592.9522ms.
[23:40:34 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[23:40:34 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 2756.7249ms
[23:40:34 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:40:34 INF] Information details: ArticleController -> GetOffers (id:1234,maxPrice:256)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:1234,vendorHttpClientName:vendor1)=>
VendorRepository -> GetArticle (id:1234,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:1234,vendorHttpClientName:vendor2)=>
VendorRepository -> GetArticle (id:1234,vendorHttpClientName:vendor2)=>
VendorGrpcRepository -> IsArticleExist (id:1234)=>
VendorGrpcRepository -> GetArticle (id:1234)
[23:40:34 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1234/offers?MaxArticlePrice=256 - - - 200 - application/json;+charset=utf-8 3223.2399ms
[23:40:40 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1234/buy - -
[23:40:40 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:40:40 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:40:40 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:40:40 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 39.4831ms.
[23:40:40 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Order.OrderDto'.
[23:40:41 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 71.2163ms
[23:40:41 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:40:41 INF] Information details: ArticleController -> Buy (id:1234,customerId)=>
BuyArticleCommand -> Handle=>
ArticleRepository -> Exists=>
ArticleRepository -> Get=>
OrderRepository -> ExistForArticle=>
ArticleRepository -> Get=>
OrderRepository -> Add=>
UnitOfWork -> Save
[23:40:41 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1234/buy - - - 200 - application/json;+charset=utf-8 92.3340ms
[23:43:22 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[23:43:23 INF] Now listening on: https://localhost:7111
[23:43:23 INF] Now listening on: http://localhost:5111
[23:43:23 INF] Application started. Press Ctrl+C to shut down.
[23:43:23 INF] Hosting environment: Development
[23:43:23 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[23:43:26 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[23:43:27 INF] Information details: 
[23:43:27 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[23:43:27 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 818.7410ms
[23:43:27 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/swagger-ui.css - -
[23:43:27 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[23:43:27 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - -
[23:43:27 INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
[23:43:27 INF] Information details: 
[23:43:28 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/swagger-ui.css - - - 0 143943 text/css 717.5030ms
[23:43:28 INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
[23:43:28 INF] Information details: 
[23:43:28 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - - - 0 628 image/png 262.7341ms
[23:43:28 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 796.2581ms
[23:43:28 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[23:43:28 INF] Information details: 
[23:43:28 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 288.7027ms
[23:43:48 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74
[23:43:48 INF] CORS policy execution successful.
[23:43:49 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[23:43:49 INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Login(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[23:43:49 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:43:49 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 447.2882ms.
[23:43:49 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthDto'.
[23:43:49 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) in 573.4927ms
[23:43:49 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[23:43:49 INF] Information details: AuthController -> Login (username:acc-test-three@gmail.com)=>
LoginHandler -> Handle=>
ArticleRepository -> GetByUsername=>
TokenService -> CreateToken
[23:43:49 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74 - 200 - application/json;+charset=utf-8 733.1803ms
[23:44:08 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=1234 - -
[23:44:08 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:44:08 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:44:08 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:44:08 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 265.0922ms.
[23:44:08 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[23:44:08 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 314.4777ms
[23:44:08 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:44:08 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:1234)=>
GetArticleOfferByIdHandler -> Handle=>
ArticleRepository -> Get=>
OrderRepository -> ExistForArticle
[23:44:08 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=1234 - - - 200 - application/json;+charset=utf-8 395.3661ms
[23:44:19 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - -
[23:44:19 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:44:19 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:44:19 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:44:19 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 27.5114ms.
[23:44:19 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Order.OrderDto'.
[23:44:19 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 54.9173ms
[23:44:19 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:44:19 INF] Information details: ArticleController -> Buy (id:1,customerId)=>
BuyArticleCommand -> Handle=>
ArticleRepository -> Exists=>
ArticleRepository -> Get=>
OrderRepository -> ExistForArticle=>
ArticleRepository -> Get=>
ArticleRepository -> Get=>
OrderRepository -> Add=>
UnitOfWork -> Save
[23:44:19 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - - - 200 - application/json;+charset=utf-8 73.8834ms
[23:45:13 INF] User profile is available. Using 'C:\Users\luka.radovanovic\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[23:45:14 INF] Now listening on: https://localhost:7111
[23:45:14 INF] Now listening on: http://localhost:5111
[23:45:14 INF] Application started. Press Ctrl+C to shut down.
[23:45:14 INF] Hosting environment: Development
[23:45:14 INF] Content root path: C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.API
[23:45:19 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/index.html - -
[23:45:20 INF] Information details: 
[23:45:20 INF] Request starting HTTP/2 GET https://localhost:7111/_vs/browserLink - -
[23:45:20 WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page.
[23:45:20 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/index.html - - - 200 - text/html;charset=utf-8 813.8429ms
[23:45:20 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - -
[23:45:21 INF] Request finished HTTP/2 GET https://localhost:7111/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 518.6307ms
[23:45:21 INF] Request starting HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - -
[23:45:21 INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
[23:45:21 INF] Information details: 
[23:45:21 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/favicon-32x32.png - - - 0 628 image/png 506.4346ms
[23:45:21 INF] Information details: 
[23:45:21 INF] Request finished HTTP/2 GET https://localhost:7111/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 411.1137ms
[23:45:33 INF] Request starting HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74
[23:45:33 INF] CORS policy execution successful.
[23:45:33 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[23:45:33 INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Login(Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.AuthController (Homework.Enigmatry.Shop.Presentation).
[23:45:33 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:45:34 WRN] No store type was specified for the decimal property 'Price' on entity type 'Article'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[23:45:34 WRN] No store type was specified for the decimal property 'Price' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
[23:45:35 INF] Executed DbCommand (62ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Username] = @__username_0
[23:45:36 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2293.1599ms.
[23:45:36 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Shop.Application.DTOs.Customer.AuthDto'.
[23:45:36 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation) in 2428.1649ms
[23:45:36 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.AuthController.Login (Homework.Enigmatry.Shop.Presentation)'
[23:45:36 INF] Information details: AuthController -> Login (username:acc-test-three@gmail.com)=>
LoginHandler -> Handle=>
TokenService -> CreateToken
[23:45:36 INF] Request finished HTTP/2 POST https://localhost:7111/api/v1/Auth/login application/json 74 - 200 - application/json;+charset=utf-8 2589.6075ms
[23:45:52 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=123 - -
[23:45:52 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:45:52 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:45:52 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:45:52 INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name], [a].[Price]
FROM [Articles] AS [a]
WHERE [a].[Id] = @__id_0
[23:45:52 INF] Executed DbCommand (3ms) [Parameters=[@__articleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]
        WHERE [o].[ArticleId] = @__articleId_0 AND [o].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:45:52 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 324.8911ms.
[23:45:52 INF] Executing ObjectResult, writing value of type 'System.String'.
[23:45:52 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 362.5629ms
[23:45:52 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:45:52 INF] Information details: ArticleController -> GetOffers (id:1,maxPrice:123)=>
GetArticleOfferByIdHandler -> Handle
[23:45:52 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/offers?MaxArticlePrice=123 - - - 302 - text/plain;+charset=utf-8 436.6463ms
[23:46:00 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - -
[23:46:00 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:46:00 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:46:00 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:46:00 INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]
        WHERE [c].[Id] = @__id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:46:00 INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__id_0
[23:46:00 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 114.3128ms.
[23:46:00 INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
[23:46:00 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 147.2579ms
[23:46:00 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:46:00 INF] Information details: ArticleController -> Buy (id:1,customerId)=>
BuyArticleCommand -> Handle
[23:46:00 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/1/buy - - - 400 - text/plain;+charset=utf-8 174.4700ms
[23:46:05 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/152/buy - -
[23:46:05 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:46:05 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:46:05 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:46:05 INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]
        WHERE [c].[Id] = @__id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:46:05 INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__id_0
[23:46:05 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 17.4595ms.
[23:46:05 INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
[23:46:05 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 36.8318ms
[23:46:05 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:46:05 INF] Information details: ArticleController -> Buy (id:152,customerId)=>
BuyArticleCommand -> Handle
[23:46:05 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/152/buy - - - 400 - text/plain;+charset=utf-8 46.3933ms
[23:46:11 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/165/offers?MaxArticlePrice=123 - -
[23:46:11 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:46:11 INF] Route matched with {action = "GetOffers", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] GetOffers(Int32, Homework.Enigmatry.Shop.Application.DTOs.Article.ArticleRequestDto, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:46:11 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:46:11 INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name], [a].[Price]
FROM [Articles] AS [a]
WHERE [a].[Id] = @__id_0
[23:46:11 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/165/exist
[23:46:11 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/165/exist
[23:46:12 INF] Received HTTP response headers after 355.8556ms - 200
[23:46:12 INF] End processing HTTP request after 364.0908ms - 200
[23:46:12 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/165
[23:46:12 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/165
[23:46:12 INF] Received HTTP response headers after 265.4677ms - 200
[23:46:12 INF] End processing HTTP request after 268.4204ms - 200
[23:46:12 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/165/exist
[23:46:12 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/165/exist
[23:46:12 INF] Received HTTP response headers after 146.8559ms - 200
[23:46:12 INF] End processing HTTP request after 150.8924ms - 200
[23:46:12 INF] Start processing HTTP request GET http://localhost:5222/api/v1/Article/165
[23:46:12 INF] Sending HTTP request GET http://localhost:5222/api/v1/Article/165
[23:46:12 INF] Received HTTP response headers after 140.059ms - 200
[23:46:12 INF] End processing HTTP request after 144.0186ms - 200
[23:46:13 INF] Executed action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1736.8622ms.
[23:46:13 INF] Executing OkObjectResult, writing value of type 'Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto'.
[23:46:13 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation) in 1760.6925ms
[23:46:13 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.GetOffers (Homework.Enigmatry.Shop.Presentation)'
[23:46:13 INF] Information details: ArticleController -> GetOffers (id:165,maxPrice:123)=>
GetArticleOfferByIdHandler -> Handle=>
VendorService -> GetAvailableArticles =>
VendorRepository -> IsArticleExist (id:165,vendorHttpClientName:vendor1)=>
VendorRepository -> GetArticle (id:165,vendorHttpClientName:vendor1)=>
VendorRepository -> IsArticleExist (id:165,vendorHttpClientName:vendor2)=>
VendorRepository -> GetArticle (id:165,vendorHttpClientName:vendor2)=>
VendorGrpcRepository -> IsArticleExist (id:165)=>
VendorGrpcRepository -> GetArticle (id:165)
[23:46:13 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/165/offers?MaxArticlePrice=123 - - - 200 - application/json;+charset=utf-8 1772.0284ms
[23:46:19 INF] Request starting HTTP/2 GET https://localhost:7111/api/v1/Article/165/buy - -
[23:46:19 INF] Executing endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:46:19 INF] Route matched with {action = "Buy", controller = "Article"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Homework.Enigmatry.Application.Shared.DTOs.Article.ArticleDto]] Buy(Int32, System.Threading.CancellationToken) on controller Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController (Homework.Enigmatry.Shop.Presentation).
[23:46:19 INF] Executing action method Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) - Validation state: "Valid"
[23:46:19 INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Customers] AS [c]
        WHERE [c].[Id] = @__id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:46:19 INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__id_0
[23:46:19 INF] Executed DbCommand (2ms) [Parameters=[@__articleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]
        WHERE [o].[ArticleId] = @__articleId_0 AND [o].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[23:46:19 INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [c].[Id], [c].[Password], [c].[Role], [c].[Username]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__id_0
[23:46:19 INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name], [a].[Price]
FROM [Articles] AS [a]
WHERE [a].[Id] = @__id_0
[23:46:20 INF] Executed action Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation) in 1079.1937ms
[23:46:21 INF] Executed endpoint 'Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy (Homework.Enigmatry.Shop.Presentation)'
[23:46:21 ERR] Error details: Internal server error:Its not constructed to support saving of orders with articles (on disc) which are not at our system!!!
Homework.Enigmatry.Shop.Application.Exceptions.UnavailableAtLocalPersistenceStorageException: Its not constructed to support saving of orders with articles (on disc) which are not at our system!!!
   at Homework.Enigmatry.Shop.Application.Features.Articles.Handlers.Commands.BuyArticleCommand.Handle(BuyArticleRequest request, CancellationToken cancellationToken) in C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.Application\Features\Articles\Handlers\Commands\BuyArticleCommand.cs:line 65
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Homework.Enigmatry.Shop.Presentation.Controllers.ArticleController.Buy(Int32 id, CancellationToken cancellationToken) in C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.Presentation\Controllers\ArticleController.cs:line 105
   at lambda_method90(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Homework.Enigmatry.Shop.Presentation.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\luka.radovanovic\Desktop\Admin\Homework.Enigmatry.Shop\Homework.Enigmatry.Shop.Presentation\Middleware\ExceptionMiddleware.cs:line 58
[23:46:21 INF] Information details: ArticleController -> Buy (id:165,customerId)=>
BuyArticleCommand -> Handle
[23:46:21 INF] Request finished HTTP/2 GET https://localhost:7111/api/v1/Article/165/buy - - - 500 - application/json 2112.6337ms
